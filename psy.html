<!DOCTYPE html>
<html lang="he" dir="rtl" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PsychoFlash | Visual Experience Engineering</title>
    <meta name="description" content="הנדסת חוויות ויזואליות, שידורים חיים, AI ואלגוריטמיקה">

    <!-- Favicons -->
    <link rel="icon" href="https://img.icons8.com/nolan/96/00f2ff/bd00ff/lightning-bolt.png" type="image/png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@100;300;400;500;700;800;900&family=Teko:wght@300;400;500;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        :root {
            /* Default / Light Mode Variables */
            --primary: #0070f3;
            --secondary: #7928ca;
            --bg-color: #f0f2f5;
            --text-color: #1a1a1a;
            --text-muted: #555555;
            --glass-border: rgba(0, 0, 0, 0.1);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --nav-bg: rgba(255, 255, 255, 0.8);
            --nav-text: #333;
            --nav-active: #000;
            --card-shadow: 0 20px 40px rgba(0,0,0,0.1);
            --section-spacing: 180px;
        }

        /* Dark Mode Overrides */
        html.dark {
            --primary: #00f2ff; /* Cyan neon */
            --secondary: #bd00ff; /* Purple neon */
            --bg-color: #050508; /* Slightly darker deep background */
            --text-color: #ffffff;
            --text-muted: #a0a0a0;
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-bg: rgba(15, 15, 20, 0.85);
            --nav-bg: rgba(5, 5, 8, 0.8);
            --nav-text: #a0a0a0;
            --nav-active: #fff;
            --card-shadow: 0 25px 50px rgba(0,0,0,0.4);
        }

        html {
            scroll-behavior: smooth;
            background-color: var(--bg-color);
            transition: background-color 0.5s ease;
        }

        body {
            margin: 0;
            font-family: 'Heebo', sans-serif;
            color: var(--text-color);
            overflow-x: hidden;
            cursor: auto;
            transition: color 0.5s ease;
        }

        /* Typography */
        h1, h2, h3, .logo { font-family: 'Heebo', sans-serif; }
        .teko-font { font-family: 'Teko', sans-serif; }
        .orbitron-font { font-family: 'Orbitron', sans-serif; }
        
        .section-title {
            font-family: 'Teko', sans-serif;
            font-size: clamp(4rem, 7vw, 7rem);
            text-transform: uppercase;
            line-height: 0.85;
            margin-bottom: 4rem;
            background: linear-gradient(to left, var(--text-color), var(--text-muted));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            display: inline-block;
        }
        
        /* Glitch Effect */
        .glitch-text { position: relative; display: inline-block; }
        .glitch-text::before, .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--bg-color); 
            opacity: 0.8;
        }
        
        .glitch-active::before {
            left: 2px;
            text-shadow: -1px 0 var(--secondary);
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 2s 1 forwards;
        }
        .glitch-active::after {
            left: -2px;
            text-shadow: -1px 0 var(--primary);
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim2 2.2s 1 forwards;
        }

        @keyframes glitch-anim {
            0% { clip: rect(33px, 9999px, 11px, 0); opacity: 1; }
            100% { clip: rect(67px, 9999px, 3px, 0); opacity: 0; display: none; }
        }
        @keyframes glitch-anim2 {
            0% { clip: rect(2px, 9999px, 44px, 0); opacity: 1; }
            100% { clip: rect(12px, 9999px, 22px, 0); opacity: 0; display: none; }
        }

        /* Backgrounds */
        #webgl-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.5; pointer-events: none;
        }
        
        #video-bg-wrapper {
            position: fixed; inset: 0; z-index: -2;
            opacity: 0.15;
            transition: opacity 1s ease;
            filter: grayscale(100%) contrast(1.1) brightness(0.6);
        }
        html.dark #video-bg-wrapper { opacity: 0.3; } 
        
        .gradient-overlay {
            position: fixed; inset: 0; z-index: -1;
            background: radial-gradient(circle at 50% 50%, transparent 0%, var(--bg-color) 85%);
            pointer-events: none;
        }

        /* Layout */
        header {
            position: fixed; top: 0; width: 100%; z-index: 100;
            padding: 25px 50px;
            display: flex; justify-content: space-between; align-items: center;
            background: transparent;
            transition: all 0.4s ease;
        }
        header.scrolled { 
            padding: 15px 50px; 
            background: var(--nav-bg);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--glass-border);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
        }

        .nav-link {
            position: relative; font-weight: 500; color: var(--nav-text);
            transition: color 0.3s; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 1.5px;
        }
        .nav-link::before {
            content: ''; position: absolute; bottom: -5px; right: 0;
            width: 0%; height: 2px; background: var(--primary);
            transition: width 0.3s ease;
        }
        html[dir="ltr"] .nav-link::before { right: auto; left: 0; }
        .nav-link:hover, .nav-link.active { color: var(--nav-active); }
        .nav-link:hover::before, .nav-link.active::before { width: 100%; }

        main > section {
            position: relative; padding: var(--section-spacing) 20px; max-width: 1600px; margin: 0 auto;
        }

        /* Cards */
        .glass-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 4rem;
            backdrop-filter: blur(30px);
            transition: transform 0.3s, background 0.3s, border-color 0.3s;
            box-shadow: var(--card-shadow);
        }

        /* Buttons */
        .cyber-btn {
            position: relative; padding: 14px 40px;
            background: transparent; color: var(--primary);
            border: 1px solid var(--primary);
            font-family: 'Orbitron', sans-serif; text-transform: uppercase; font-weight: 700; letter-spacing: 1.5px;
            overflow: hidden; transition: all 0.4s ease;
            clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
            font-size: 1rem;
            white-space: nowrap;
            cursor: pointer;
        }
        .cyber-btn:hover {
            background: var(--primary);
            color: #000;
            box-shadow: 0 0 40px var(--primary);
        }

        /* Services Design */
        .services-container {
            display: grid; grid-template-columns: 1fr; gap: 8rem;
        }
        @media (min-width: 1200px) {
            .services-container { grid-template-columns: 1fr 1.2fr; }
        }
        
        .service-list-item {
            padding: 3rem;
            border-bottom: 1px solid var(--glass-border);
            cursor: pointer;
            transition: all 0.4s ease;
            opacity: 0.4;
            display: flex; align-items: flex-start; gap: 2rem;
            position: relative;
        }
        .service-list-item::after {
            content: '+';
            position: absolute; left: 0.5rem; top: 50%; transform: translateY(-50%);
            font-size: 2rem; color: var(--primary); opacity: 0; transition: opacity 0.3s;
        }
        .service-list-item:hover::after { opacity: 1; }

        .service-list-item:hover, .service-list-item.active {
            opacity: 1;
            padding-right: 3rem; 
            border-bottom-color: var(--primary);
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.02));
        }
        html[dir="ltr"] .service-list-item:hover, html[dir="ltr"] .service-list-item.active {
             padding-right: 3rem; padding-left: 3rem;
        }

        .preview-stage {
            position: relative;
            border-radius: 30px;
            overflow: hidden;
            aspect-ratio: 16/9;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--glass-border);
            background: #000;
        }
        
        .preview-media {
            position: absolute; inset: 0; width: 100%; height: 100%;
            object-fit: cover;
            opacity: 0; transition: opacity 0.8s ease, transform 1.2s cubic-bezier(0.22, 1, 0.36, 1);
            transform: scale(1.1);
        }
        .preview-media.active { opacity: 1; transform: scale(1); }

        /* Stats Strip */
        #stats-strip {
            background: rgba(255,255,255,0.01);
            border-top: 1px solid var(--glass-border);
            border-bottom: 1px solid var(--glass-border);
            backdrop-filter: blur(15px);
            padding: 100px 0;
            margin-top: 60px;
            min-height: 300px; /* Ensure height stability during transitions */
            display: flex;
            align-items: center;
        }

        /* Stats Animations */
        .stat-content-wrapper {
            transition: opacity 0.6s ease, transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
            opacity: 1;
            transform: translateY(0);
        }
        .stat-content-wrapper.fading {
            opacity: 0;
            transform: translateY(20px);
        }

        .stat-number {
            font-family: 'Orbitron', sans-serif;
            font-size: 5rem; font-weight: 900;
            line-height: 1;
            background: linear-gradient(to bottom, var(--text-color), var(--text-muted));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
            margin-bottom: 1rem;
        }

        /* Draggable Ticker */
        .ticker-wrapper {
            width: 100%;
            overflow: hidden;
            cursor: grab;
            padding: 4rem 0;
            mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
        }
        .ticker-wrapper:active { cursor: grabbing; }
        
        .ticker-content {
            display: flex;
            gap: 5rem;
            width: max-content;
            animation: scroll-left 80s linear infinite;
        }
        .ticker-wrapper:hover .ticker-content {
            animation-play-state: paused;
        }
        
        .partner-logo-card {
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            width: 240px; height: 160px;
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 25px;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
        }
        .partner-logo-card:hover {
            background: rgba(255,255,255,0.06);
            border-color: var(--primary);
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 15px 50px -10px rgba(0, 242, 255, 0.15);
        }
        .partner-logo-card img {
            max-width: 90%; max-height: 90px;
            object-fit: contain;
            filter: grayscale(100%) brightness(0.9) contrast(1.2);
            transition: all 0.4s;
        }
        .partner-logo-card:hover img {
            filter: grayscale(0%) brightness(1) contrast(1);
        }
        .partner-name {
            margin-top: 20px;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .partner-logo-card:hover .partner-name {
            opacity: 1;
        }

        @keyframes scroll-left {
            0% { transform: translateX(0); }
            100% { transform: translateX(50%); } /* RTL */
        }
        html[dir="ltr"] .ticker-content { animation-name: scroll-right; }
        @keyframes scroll-right {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        /* Contact */
        .contact-item {
            display: flex; align-items: center; gap: 1.5rem;
            font-size: 1.5rem; color: var(--text-color);
            text-decoration: none;
            transition: all 0.3s;
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid transparent;
        }
        .contact-item:hover { 
            color: var(--primary); 
            background: rgba(255,255,255,0.03);
            border-color: var(--glass-border);
        }
        .contact-icon { width: 32px; height: 32px; stroke: var(--primary); }

        /* Process Cards - Cleaner */
        .process-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 3rem;
            margin-top: 5rem;
        }
        @media(max-width: 992px) { .process-grid { grid-template-columns: 1fr; } }

        .process-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2.5rem;
            transition: all 0.4s ease;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            display: flex; flex-direction: column;
        }
        .process-card:hover { transform: translateY(-12px); border-color: var(--primary); box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2); }
        .process-img {
            width: 100%; height: 220px; object-fit: cover; border-radius: 16px; margin-bottom: 2rem;
            filter: brightness(0.7) grayscale(40%); transition: filter 0.4s;
        }
        .process-card:hover .process-img { filter: brightness(1.1) grayscale(0%); }
        
        .click-hint {
            position: absolute; top: 1.5rem; left: 1.5rem; 
            background: var(--primary); color: #000;
            padding: 6px 14px; border-radius: 30px;
            font-size: 0.75rem; font-weight: bold;
            opacity: 0; transition: opacity 0.3s, transform 0.3s;
            transform: translateY(10px);
        }
        .process-card:hover .click-hint { opacity: 1; transform: translateY(0); }

        /* Partner Badge in Modal */
        .partner-badge {
            display: inline-flex; align-items: center; gap: 0.8rem;
            background: rgba(255,255,255,0.05); padding: 0.5rem 1rem;
            border-radius: 50px; border: 1px solid var(--glass-border);
            margin-bottom: 1.5rem; font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }
        .partner-badge img { height: 24px; width: auto; }

        /* Modal System */
        .modal-overlay {
            position: fixed; inset: 0; z-index: 1000;
            background: rgba(0,0,0,0.92);
            backdrop-filter: blur(25px);
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.4s ease;
        }
        .modal-overlay.active { opacity: 1; pointer-events: all; }
        
        .modal-content {
            background: var(--bg-color);
            border: 1px solid var(--glass-border);
            width: 95%; max-width: 1300px; max-height: 95vh;
            border-radius: 30px;
            overflow-y: auto;
            position: relative;
            transform: translateY(50px) scale(0.98);
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 40px 80px -12px rgba(0, 0, 0, 0.6);
        }
        .modal-overlay.active .modal-content { transform: translateY(0) scale(1); }
        
        .modal-close {
            position: absolute; top: 30px; left: 30px; z-index: 50;
            background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border); color: #fff;
            width: 50px; height: 50px; border-radius: 50%;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: all 0.3s;
            font-size: 1.5rem;
        }
        .modal-close:hover { background: var(--primary); border-color: var(--primary); transform: rotate(90deg); color: #000; }

        /* Client Stats inside Modal */
        .client-stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
            background: rgba(255,255,255,0.02);
            padding: 2.5rem;
            border-radius: 20px;
            border: 1px solid var(--glass-border);
        }
        .client-stat-box {
            text-align: center;
        }
        .client-stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(to bottom, var(--primary), #fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }
        .client-stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        /* Mobile Menu */
        #mobile-menu {
            position: fixed; inset: 0; background: var(--bg-color); z-index: 900;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transform: translateX(100%); transition: transform 0.4s ease;
        }
        html[dir="ltr"] #mobile-menu { transform: translateX(-100%); }
        #mobile-menu.open { transform: translateX(0); }

        .text-gradient-primary { color: var(--primary); }
        .text-muted-custom { color: var(--text-muted); }
        .logo { color: var(--text-color); }

    </style>
</head>

<body>
    <!-- Modal Container -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-content" id="modal-inner">
            <!-- Content Injected via JS -->
        </div>
    </div>

    <!-- Backgrounds -->
    <div id="webgl-container"></div>
    <div class="gradient-overlay"></div>

    <!-- Video Player Background -->
    <div id="video-bg-wrapper">
        <div id="player-container-a" style="position:absolute; inset:0; width:100%; height:100%;"></div>
        <div id="player-container-b" style="position:absolute; inset:0; width:100%; height:100%; opacity:0;"></div>
    </div>

    <!-- Header -->
    <header id="main-header">
        <a href="#" class="logo text-3xl font-bold tracking-tighter">
            PSYCHO<span style="color:var(--primary)">FLASH</span>
        </a>
        
        <nav class="hidden lg:flex gap-10 items-center">
            <a href="#home" class="nav-link hover-trigger" data-key="nav_home">ראשי</a>
            <a href="#about" class="nav-link hover-trigger" data-key="nav_about">אודות</a>
            <a href="#services" class="nav-link hover-trigger" data-key="nav_services">שירותים</a>
            <a href="#ecosystem" class="nav-link hover-trigger" data-key="nav_ecosystem">מעגלי עבודה</a>
            <a href="#testimonials" class="nav-link hover-trigger" data-key="nav_recommendations">המלצות</a>
            <a href="#contact" class="nav-link hover-trigger" data-key="nav_contact">צור קשר</a>
        </nav>

        <div class="flex items-center gap-6">
            <a href="#contact" class="hidden md:inline-block cyber-btn text-sm hover-trigger">LET'S TALK</a>
            
            <div class="hidden md:flex gap-4 items-center border-l border-white/20 pl-4 ml-2 rtl:border-r rtl:border-l-0 rtl:pr-4 rtl:mr-2 rtl:pl-0">
                <div class="flex gap-2">
                    <img src="https://flagcdn.com/w40/il.png" class="w-6 h-4 lang-btn active cursor-pointer" data-lang="he" alt="Hebrew">
                    <img src="https://flagcdn.com/w40/us.png" class="w-6 h-4 lang-btn cursor-pointer" data-lang="en" alt="English">
                </div>
                <button id="theme-toggle" class="theme-btn text-[var(--text-color)]" aria-label="Toggle Theme">
                    <svg id="icon-sun" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M12 12a5 5 0 100-10 5 5 0 000 10z"></path></svg>
                    <svg id="icon-moon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                </button>
            </div>

            <button class="lg:hidden text-[var(--text-color)] hover-trigger" id="menu-btn">
                <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu">
        <button id="close-menu" class="absolute top-8 left-8 text-[var(--text-color)] rtl:left-8 rtl:right-auto ltr:right-8 ltr:left-auto">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
        <nav class="flex flex-col items-center gap-10 text-2xl text-[var(--text-color)]">
            <a href="#home" class="mobile-link" data-key="nav_home">ראשי</a>
            <a href="#about" class="mobile-link" data-key="nav_about">אודות</a>
            <a href="#services" class="mobile-link" data-key="nav_services">שירותים</a>
            <a href="#ecosystem" class="mobile-link" data-key="nav_ecosystem">מעגלי עבודה</a>
            <a href="#testimonials" class="mobile-link" data-key="nav_recommendations">המלצות</a>
            <a href="#contact" class="mobile-link" data-key="nav_contact">צור קשר</a>
        </nav>
    </div>

    <main>
        <!-- Hero Section -->
        <section id="home" class="min-h-screen flex flex-col justify-center items-center text-center pt-32">
            <h1 class="text-6xl md:text-9xl font-black mb-10 tracking-tight leading-none glitch-text glitch-active" data-key="hero_title" data-text="הנדסת חוויות ויזואליות">
                הנדסת חוויות <span style="color:transparent; -webkit-text-stroke: 2px var(--primary);">ויזואליות</span>
            </h1>
            <h2 class="text-3xl md:text-6xl font-bold mb-16 text-muted-custom" data-key="hero_subtitle">
                איפה שטכנולוגיה פוגשת רגש בזמן אמת
            </h2>
            <p class="max-w-4xl text-xl md:text-2xl text-muted-custom mb-20 leading-relaxed opacity-80" data-key="hero_desc">
                אנחנו לא רק מפיקים תוכן, אנחנו מהנדסים רגעים. שילוב עוצמתי בין שידורים חיים, קוד יצירתי ובינה מלאכותית שמשנה את חוקי המשחק והופכת כל פיקסל לסיפור.
            </p>
            <div class="flex flex-col md:flex-row gap-10">
                <a href="#contact" class="cyber-btn hover-trigger text-lg py-4 px-10" data-key="hero_cta_start">התחילו פרויקט</a>
                <a href="#ecosystem" class="cyber-btn hover-trigger text-lg py-4 px-10" style="border-color: var(--text-color); color: var(--text-color);" data-key="hero_cta_work">למעגלי העבודה</a>
            </div>
        </section>

        <!-- About Section (Enhanced Process) -->
        <section id="about" class="scroll-reveal">
            <div class="text-center mb-32">
                 <h2 class="section-title" data-key="about_title">מי אנחנו</h2>
                 <p class="text-2xl max-w-5xl mx-auto text-muted-custom leading-relaxed" data-key="about_intro">
                     בנקודת המפגש שבין ביצוע טכני מושלם לחזון אומנותי פורץ דרך. אנחנו הופכים את הבלתי אפשרי למציאות ויזואלית.
                 </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-32 items-start">
                <div>
                    <h3 class="text-4xl font-bold mb-10 text-[var(--primary)] leading-tight" data-key="about_subtitle">מקוד לאומנות: המסע של כל פרויקט</h3>
                    <p class="text-muted-custom text-xl leading-relaxed mb-10" data-key="about_text">
                        העולם הדיגיטלי דורש מהירות של מכונה ונשמה של אומן. השיטה שלנו ייחודית: אנחנו מפרקים כל אתגר לגורמים טכניים ומרכיבים אותם מחדש ליצירה ויזואלית חיה.
                    </p>
                    <p class="text-muted-custom text-xl leading-relaxed mb-16" data-key="about_text2">
                        זה לא רק "לצלם ולערוך". זה לבנות מערכות שמגיבות בזמן אמת, לייצר יש מאין באמצעות AI, ולדעת שברגע האמת - בשידור החי - הכל יעבוד כמו שעון שוויצרי.
                    </p>
                    
                    <!-- Process Grid with Click Actions -->
                    <div class="process-grid">
                        <div class="process-card" onclick="openModal('strategy')">
                            <span class="click-hint">לחץ להרחבה</span>
                            <img src="assets/20250223_151517.jpg" class="process-img" alt="Strategy">
                            <h4 class="text-3xl font-bold text-[var(--text-color)] mb-3" data-key="process_1">אסטרטגיה</h4>
                            <p class="text-base text-muted-custom" data-key="process_1_desc">תכנון אדריכלי של האירוע או התוכן, מהמסר ועד לפיקסל.</p>
                        </div>
                        <div class="process-card" onclick="openModal('production')">
                            <span class="click-hint">לחץ להרחבה</span>
                            <img src="assets/20250215_190052.jpg" class="process-img" alt="Production">
                            <h4 class="text-3xl font-bold text-[var(--text-color)] mb-3" data-key="process_2">הפקה חיה</h4>
                            <p class="text-base text-muted-custom" data-key="process_2_desc">ביצוע טכני ללא פשרות, ניהול צוותים וניתוב בזמן אמת.</p>
                        </div>
                        <div class="process-card" onclick="openModal('ai')">
                            <span class="click-hint">לחץ להרחבה</span>
                            <img src="assets/20250223_151808.jpg" class="process-img" alt="AI">
                            <h4 class="text-3xl font-bold text-[var(--text-color)] mb-3" data-key="process_ai">AI & Tech</h4>
                            <p class="text-base text-muted-custom" data-key="process_ai_desc">העצמת הויזואל עם כלים מחוללי תמונה וקוד.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Main About Image (Tech/Art Blend) -->
                <div class="relative h-[800px] rounded-[40px] overflow-hidden border border-[var(--glass-border)] group sticky top-32 shadow-2xl">
                    <img src="assets/20250215_175100.jpg" alt="Cyberpunk Studio" class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105">
                    <div class="absolute inset-0 bg-gradient-to-t from-[var(--bg-color)] via-transparent to-transparent opacity-60"></div>
                </div>
            </div>
        </section>

        <!-- Services (Expandable) -->
        <section id="services">
            <h2 class="section-title mb-20" data-key="section_solutions">השירותים שלנו</h2>
            <p class="text-center text-muted-custom mb-20 text-2xl">לחצו על כל שירות כדי לראות את הקסם מאחורי הקלעים</p>
            
            <div class="services-container">
                <!-- Right Side: List -->
                <div class="service-list space-y-10">
                    <div class="service-list-item active" data-target="preview-1" onclick="openModal('service_live')">
                        <img src="https://img.icons8.com/nolan/64/00f2ff/bd00ff/camcorder-pro.png" class="w-16 h-16 object-contain" alt="Live Icon">
                        <div>
                            <h3 class="text-4xl font-bold text-[var(--text-color)]" data-key="sol_live_title">הפקות וידאו ושידורים חיים</h3>
                            <p class="text-lg text-muted-custom mt-4" data-key="sol_live_short">מולטי-קאמרה, ניתוב בזמן אמת ושידור לכל פלטפורמה.</p>
                            <div class="flex gap-3 mt-6 opacity-70">
                                <img src="https://logo.clearbit.com/go-live.co.il" class="h-8 rounded bg-white p-1" alt="GoLive">
                                <img src="https://logo.clearbit.com/mvp-tv.co.il" class="h-8 rounded bg-white p-1" alt="Mizmor">
                            </div>
                        </div>
                    </div>
                    <div class="service-list-item" data-target="preview-2" onclick="openModal('service_ai')">
                        <img src="https://img.icons8.com/nolan/64/00f2ff/bd00ff/artificial-intelligence.png" class="w-16 h-16 object-contain" alt="AI Icon">
                        <div>
                            <h3 class="text-4xl font-bold text-[var(--text-color)]" data-key="sol_ai_title">יצירת תוכן AI & On The Fly</h3>
                            <p class="text-lg text-muted-custom mt-4" data-key="sol_ai_short">שתילת אובייקטים, הנפשת תמונות ויצירת עולמות ללא גבול פיזי.</p>
                            <div class="flex gap-3 mt-6 opacity-70">
                                <img src="https://logo.clearbit.com/mindfly.live" class="h-8 rounded bg-white p-1" alt="MindFly">
                                <img src="https://logo.clearbit.com/pentera.io" class="h-8 rounded bg-white p-1" alt="Pentera">
                            </div>
                        </div>
                    </div>
                    <div class="service-list-item" data-target="preview-3" onclick="openModal('service_virtual')">
                         <img src="https://img.icons8.com/nolan/64/00f2ff/bd00ff/virtual-reality.png" class="w-16 h-16 object-contain" alt="Virtual Icon">
                        <div>
                            <h3 class="text-4xl font-bold text-[var(--text-color)]" data-key="sol_virtual_title">כנסים וירטואליים והיברידיים</h3>
                            <p class="text-lg text-muted-custom mt-4" data-key="sol_virtual_short">שילוב דוברים מהאולפן ומהבית בסביבה אימרסיבית.</p>
                        </div>
                    </div>
                    <div class="service-list-item" data-target="preview-4" onclick="openModal('service_post')">
                        <img src="https://img.icons8.com/nolan/64/00f2ff/bd00ff/video-editing.png" class="w-16 h-16 object-contain" alt="Post Icon">
                        <div>
                            <h3 class="text-4xl font-bold text-[var(--text-color)]" data-key="sol_post_title">פוסט-פרודקשן מתקדם</h3>
                            <p class="text-lg text-muted-custom mt-4" data-key="sol_post_short">עריכה, צבע, ואנימציה שסוגרים את המעגל.</p>
                            <div class="flex gap-3 mt-6 opacity-70">
                                <img src="https://logo.clearbit.com/sweet.security" class="h-8 rounded bg-white p-1" alt="Sweet">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Left Side: Sticky Preview -->
                <div class="relative hidden lg:block h-full pointer-events-none">
                    <div class="preview-stage sticky top-40">
                        <img src="assets/20250214_192736.jpg" class="preview-media active" id="preview-1" alt="Live">
                        <img src="assets/20250223_151800.jpg" class="preview-media" id="preview-2" alt="AI">
                        <img src="assets/20250215_175126(0).jpg" class="preview-media" id="preview-3" alt="Virtual">
                        <img src="assets/20250216_122300.jpg" class="preview-media" id="preview-4" alt="Post">
                        <div class="absolute bottom-0 left-0 right-0 p-10 bg-gradient-to-t from-black via-black/50 to-transparent">
                            <div class="flex items-center gap-3 text-[var(--primary)]">
                                <div class="w-3 h-3 bg-[var(--primary)] rounded-full animate-pulse"></div>
                                <span class="text-sm font-mono uppercase tracking-widest">לחץ על השירות להרחבה</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW MERGED SECTION: Collaborative Ecosystem (Clients & Work Circles) -->
        <section id="ecosystem" class="py-40">
            <div class="text-center mb-24">
                <h2 class="section-title" data-key="section_ecosystem">הסינרגיה שלנו: מעגלי עבודה ושותפים</h2>
                <p class="text-2xl text-muted-custom max-w-5xl mx-auto mt-6 leading-relaxed" data-key="ecosystem_desc">
                    אנחנו לא מאמינים ביחסי ספק-לקוח סטנדרטיים. הלקוחות שלנו הם הקולגות שלנו. זה יד לוחצת יד. אנחנו מפרים אחד את השני בקריאייטיב, ביכולות הניהול ובהפקת פרויקטים מורכבים.
                </p>
            </div>

            <!-- Draggable Ticker -->
            <div class="ticker-wrapper mb-24" id="draggable-ticker">
                <div class="ticker-content" id="ticker-content">
                    <!-- Content injected via JS -->
                </div>
            </div>

            <!-- Featured Projects Grid (Cine Match) - ADDED FROM NEW CODE -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 px-6">
                <!-- MindFly Project -->
                <div class="process-card group" onclick="openModal('mindfly')">
                    <div class="absolute top-4 left-4 z-10 partner-badge">
                        <img src="https://media.licdn.com/dms/image/v2/C4D0BAQG99s-i4dtuUw/company-logo_200_200/company-logo_200_200/0/1643726613899/mindfly_logo?e=2147483647&v=beta&t=J-2ZzXq-2ZzXq-2ZzXq-2ZzXq-2ZzXq-2ZzXq-2ZzXq" alt="MindFly">
                        <span>MindFly US Tour</span>
                    </div>
                    <img src="assets/20250221_095912.jpg" class="w-full h-64 object-cover rounded-xl mb-6 transition-transform duration-700 group-hover:scale-105" alt="MindFly">
                    <h3 class="text-2xl font-bold mb-2 text-[var(--text-color)]">MindFly Sports</h3>
                    <p class="text-muted-custom">מסע הפקה חוצה יבשות: 2 לגים, 13 ימים, 6 מדינות ו-3 משחקי פוטבול.</p>
                    <span class="click-hint">לפרטים מלאים +</span>
                </div>

                <!-- NBA All-Stars -->
                <div class="process-card group" onclick="openModal('nba')">
                    <div class="absolute top-4 left-4 z-10 partner-badge bg-blue-900/50 border-blue-500/30">
                        <span>NBA All-Stars</span>
                    </div>
                    <img src="assets/20250215_052712.jpg" class="w-full h-64 object-cover rounded-xl mb-6 transition-transform duration-700 group-hover:scale-105" alt="NBA">
                    <h3 class="text-2xl font-bold mb-2 text-[var(--text-color)]">RF Engineering</h3>
                    <p class="text-muted-custom">אחריות על שידור מצלמות חזה (Chest Cam) לשחקנים במשחקי כדורסל והוקי.</p>
                    <span class="click-hint">לפרטים מלאים +</span>
                </div>

                <!-- Solties Live -->
                <div class="process-card group" onclick="openModal('solties')">
                    <div class="absolute top-4 left-4 z-10 partner-badge bg-yellow-900/50 border-yellow-500/30">
                        <span>Solties Live</span>
                    </div>
                    <img src="https://img.youtube.com/vi/GqMse9F2ipY/maxresdefault.jpg" class="w-full h-64 object-cover rounded-xl mb-6 transition-transform duration-700 group-hover:scale-105" alt="Solties">
                    <h3 class="text-2xl font-bold mb-2 text-[var(--text-color)]">Solties Pool Jump</h3>
                    <p class="text-muted-custom">שידור חי רציף של 3 שעות באירוע אקסטרים, כולל עריכה בזמן אמת.</p>
                    <span class="click-hint">לצפייה בשידור +</span>
                </div>
            </div>
            
            <div class="text-center mt-16">
                <p class="text-lg text-muted-custom opacity-70"><span class="text-[var(--primary)] text-2xl align-middle">◄</span> גררו את הלוגואים או לחצו לפירוט שיתוף הפעולה</p>
            </div>
        </section>

        <!-- Stats Strip (ROTATING) -->
        <div id="stats-strip" class="w-full mt-0 border-t-0 relative z-10">
            <div id="stats-container" class="stat-content-wrapper max-w-[1800px] mx-auto px-10 grid grid-cols-1 md:grid-cols-4 gap-20 text-center divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-[var(--glass-border)]">
                <!-- Content injected via JS -->
            </div>
        </div>

        <!-- Testimonials -->
        <section id="testimonials" class="bg-[var(--glass-bg)] py-32 rounded-[40px] my-40">
             <h2 class="section-title text-center mb-20" data-key="section_testimonials">המלצות</h2>
             <div class="max-w-6xl mx-auto px-6 text-center">
                <div class="text-7xl text-[var(--primary)] mb-8">"</div>
                <p class="text-4xl text-muted-custom italic mb-10 font-light leading-relaxed">"אוריין והצוות הם המקצוענים הכי גדולים שעבדנו איתם. השקט הנפשי בשידור חי שווה הכל. היכולת שלהם לאלתר וליצור פתרונות בזמן אמת היא נדירה."</p>
                <div class="font-bold text-[var(--text-color)] text-2xl">סמנכ"ל שיווק, חברת הייטק גדולה</div>
             </div>
        </section>

        <!-- Contact -->
        <section id="contact" class="py-40">
            <div class="glass-card max-w-5xl mx-auto text-center border-t-4 border-t-[var(--primary)]">
                <h2 class="text-7xl font-bold mb-10 glitch-text glitch-active" data-text="בואו ניצור משהו מדהים" data-key="contact_title">בואו ניצור משהו מדהים</h2>
                <p class="text-3xl text-muted-custom mb-20" data-key="contact_desc">
                    יש לכם חזון? לנו יש את הכלים, הצוות והטכנולוגיה להגשים אותו.
                </p>
                
                <!-- Clean Contact Icons -->
                <div class="flex flex-col md:flex-row justify-center gap-20 items-center mb-20">
                    <a href="tel:054-255-9027" class="contact-item">
                        <svg class="contact-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                        <span class="font-bold font-mono">054-255-9027</span>
                    </a>
                    <a href="mailto:PsychoFlash@gmail.com" class="contact-item">
                        <svg class="contact-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                        <span class="font-bold">PsychoFlash@gmail.com</span>
                    </a>
                </div>

                <div class="flex justify-center gap-10">
                    <a href="https://wa.me/972542559027" target="_blank" class="cyber-btn bg-green-500/10 border-green-500 text-green-600 hover:bg-green-500 hover:text-white text-2xl py-5 px-12">WhatsApp</a>
                    <a href="mailto:PsychoFlash@gmail.com" class="cyber-btn text-2xl py-5 px-12" data-key="btn_email">שלחו מייל</a>
                </div>
                <div class="mt-16">
                    <p class="text-3xl font-bold text-[var(--text-color)] tracking-widest" data-key="contact_name">אוריין אדלני</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center text-gray-600 text-sm relative z-10 bg-black py-16 border-t border-white/10">
        <div class="flex justify-center gap-10 mb-8">
            <!-- Social Icons -->
            <a href="https://www.facebook.com/psychoflash" target="_blank" class="hover:text-white transition-colors">
                <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
            </a>
            <a href="https://www.instagram.com/orianedelenyi/" target="_blank" class="hover:text-white transition-colors">
                <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
            </a>
        </div>
        <p>&copy; 2025 PsychoFlash Productions. All rights reserved.</p>
    </footer>

    <button id="mute-btn" class="fixed bottom-8 left-8 z-50 p-4 rounded-full bg-white/10 backdrop-blur border border-white/20 text-white hover:bg-primary hover:text-black transition-all">
        <svg id="mute-icon" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
        <svg id="unmute-icon" class="hidden" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
    </button>

    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        // --- Partners / Work Circles Data (Fused with Analysis & Brand Assets) ---
        const partnersData = [
            // Tech & Startups (2024-2025 Era)
            { 
                id: 'mindfly', 
                name: 'MindFly', 
                role: 'ספורט-טק', 
                logo: 'https://media.licdn.com/dms/image/v2/C4D0BAQG99s-i4dtuUw/company-logo_200_200/company-logo_200_200/0/1643726613899/mindfly_logo?e=2147483647&v=beta&t=J-2ZzXq-2ZzXq-2ZzXq-2ZzXq-2ZzXq-2ZzXq-2ZzXq',
                desc: 'שיתוף פעולה אסטרטגי עם סטארטאפ הספורט-טק המהפכני. עבודה בנפח גבוה הכוללת עיבוד ושידור תכני BodyCam לליגות ספורט מובילות (יורוליג).',
                stats: { hours: '100+', projects: '15', period: '2024-2025', peak: 'עונת המשחקים' }
            },
            { 
                id: 'pentera', 
                name: 'Pentera', 
                role: 'סייבר יוניקורן', 
                logo: 'https://logo.clearbit.com/pentera.io',
                desc: 'הקמה ותפעול של אולפן שידור In-house מתקדם במשרדי החברה. אינטגרציה מלאה של מערכות וידאו, זום וניתוב לאירועי חברה גלובליים.',
                stats: { hours: '50+', projects: '10', period: '2022-2025', peak: 'השקות גרסה' }
            },
            { 
                id: 'sweet', 
                name: 'Sweet Security', 
                role: 'סייבר ענן', 
                logo: 'https://logo.clearbit.com/sweet.security',
                desc: 'יצירת תוכן שיווקי (Marketing Collateral) ועריכת וידאו שוטפת במודל ריטיינר עבור חברת הסייבר הצומחת.',
                stats: { hours: '30+', projects: 'Retainer', period: '2024-2025', peak: 'Q4 Push' }
            },
            {
                id: 'starburst',
                name: 'Starburst',
                role: 'Aerospace',
                logo: 'https://logo.clearbit.com/starburst.aero',
                desc: 'מניעה חדשנות גלובלית בתחומי התעופה והחלל באמצעות הפקת אירועי חדשנות ופיצ\'ים לסטארט-אפים.',
                stats: { hours: '20+', projects: '5', period: '2024-2025', peak: 'Demo Days' }
            },
            
            // Production Giants (The Anchors)
            { 
                id: 'golive', 
                name: 'Go Live Israel', 
                role: 'חברת שידור', 
                logo: 'https://logo.clearbit.com/go-live.co.il', 
                desc: 'שותפים אסטרטגיים משנת 2018. הספק הראשי להפקות שידור מורכבות, ניידות שידור ואירועים ממשלתיים.',
                stats: { hours: '2500+', projects: '80+', period: '2018-2025', peak: 'קורונה (וירטואלי)' }
            },
            { 
                id: 'oculus', 
                name: 'Oculus Productions', 
                role: 'הפקות הייטק', 
                logo: 'https://placehold.co/200x100/1a1a1a/white?text=OCULUS', 
                desc: 'הפקות יוקרה למותגי על כמו Google, Taboola ו-Gong. התמחות באירועי Tech בינלאומיים ומופעי ענק (קיסריה).',
                stats: { hours: '400+', projects: '25', period: '2021-2025', peak: 'כנסים שנתיים' }
            },
            { 
                id: 'by', 
                name: 'B.Y. Productions', 
                role: 'מגה-אירועים', 
                logo: 'https://placehold.co/200x100/1a1a1a/white?text=B.Y.+GROUP', 
                desc: 'עבודה באירועים לאומיים והפקות ענק (בנייני האומה, בריכת הסולטן). ניהול מערכות הקרנה וניתוב למסכי ענק.',
                stats: { hours: '300+', projects: '20', period: '2021-2023', peak: 'יום העצמאות' }
            },
            { 
                id: 'mizmor', 
                name: 'מזמור הפקות', 
                role: 'אולפני טלוויזיה', 
                logo: 'https://logo.clearbit.com/mvp-tv.co.il', 
                desc: 'עבודה בסטנדרט ברודקאסט מחמיר. צילומים לתוכניות פריים-טיים ("משחקי השף") ושידורי ספורט.',
                stats: { hours: '100+', projects: 'Various', period: '2018-2025', peak: 'Prime Time' }
            },

            // Independent Producers & Broadcast
            { 
                id: 'johnny', 
                name: 'יונתן אוחנה', 
                role: 'צילום וניתוב', 
                logo: 'https://placehold.co/200x100/1a1a1a/white?text=JOHNNY+OHANA', 
                desc: 'קולגה ושותף לדרך. שיתוף פעולה הדוק בתחום הצילום והניתוב למערכות מולטי-קאמרה מורכבות.' 
            },
            { 
                id: 'itamar', 
                name: 'איתמר כהן', 
                role: 'מפיק על', 
                logo: 'https://placehold.co/200x100/333333/white?text=ITAMAR+COHEN', 
                desc: 'ה"בולדוזר" של ההפקות. עשרות פרויקטים משותפים: מעיריית לוד, דרך פסטיבל הפסנתר ועד קמפיינים לאדידס.',
                stats: { hours: '800+', projects: '60+', period: '2018-2025', peak: 'אירועי קיץ' }
            },

            // Culture & Community
            { 
                id: 'eastside', 
                name: 'Eastside Studio', 
                role: 'דוקו ורפואה', 
                logo: 'https://logo.clearbit.com/eastsidestudio.co.il', 
                desc: 'התמחות בתוכן רפואי ודוקומנטרי רגיש. תיעוד עבור מד"א, טבע וכנסים רפואיים בינלאומיים.',
                stats: { hours: '200+', projects: '40', period: '2018-2023', peak: 'כנסים רפואיים' }
            },
            { 
                id: 'felicja', 
                name: 'פליציה בלומנטל', 
                role: 'מוזיקה ותרבות', 
                logo: 'https://logo.clearbit.com/fbmc.co.il', 
                desc: 'שימור נכסי תרבות. תיעוד קונצרטים וראיונות עומק במוזיאון תל אביב.',
                stats: { hours: '150+', projects: '30', period: '2020-2023', peak: 'פסטיבלים' }
            },
            { 
                id: 'yeladim', 
                name: 'ילדים בסיכוי', 
                role: 'עמותה', 
                logo: 'https://logo.clearbit.com/yeladim.org.il', 
                desc: 'שותפות ארוכת שנים מתוך שליחות. הפקת תכנים ואירועים למען ילדי פנימיות ומשפחות אומנה.',
                stats: { hours: 'Vol.', projects: 'Many', period: '2017-2025', peak: 'אירועי התרמה' }
            },
            {
                id: 'bgu',
                name: 'Ben-Gurion University',
                role: 'Education',
                logo: 'https://logo.clearbit.com/in.bgu.ac.il',
                desc: 'עריכת וידאו והנגשת תוכן אקדמי ושיווקי למחלקות האוניברסיטה.',
                stats: { hours: '30+', projects: 'Academic', period: '2022, 2025', peak: 'שנת הלימודים' }
            },
            {
                id: 'kornit',
                name: 'Kornit Digital',
                role: 'Fashion Tech',
                logo: 'https://logo.clearbit.com/kornit.com',
                desc: 'שיתוף פעולה בתחום טכנולוגיות הדפסה על טקסטיל.',
                stats: { hours: '15+', projects: 'Tech', period: '2023', peak: 'Events' }
            },
            {
                id: 'cinemark',
                name: 'Cinemark',
                role: 'Cinema Chain',
                logo: 'https://logo.clearbit.com/cinemark.com',
                desc: 'עבודה מול רשת בתי הקולנוע הבינלאומית.',
                stats: { hours: '10+', projects: 'Promo', period: '2024', peak: 'Launch' }
            }
        ];

        // --- Modal Content Data (Updated Paths to assets/) ---
        const contentData = {
            // Process Cards
            strategy: {
                title: "אסטרטגיה: הלב הפועם",
                text: "כל פרויקט גדול מתחיל בשאלה אחת: 'מה הסיפור?'. בשלב האסטרטגיה אנחנו מנתחים את ה-DNA של המותג, מגדירים את קהל היעד ומפענחים את השפה הויזואלית שתשרת את המסר בצורה הטובה ביותר.",
                image: "assets/20250223_151517.jpg"
            },
            production: {
                title: "הפקה חיה: רגע האמת",
                text: "בשידור חי אין הזדמנות שנייה. אנחנו מביאים לשטח ניסיון של מאות שעות שידור, ציוד קצה מתקדם וצוותים מיומנים שיודעים לתפקד תחת לחץ.",
                image: "assets/20250215_190052.jpg"
            },
            ai: {
                title: "AI & Tech: העתיד כבר כאן",
                text: "אנחנו משלבים כלי בינה מלאכותית בתהליך היצירה כדי לפרוץ גבולות. מיצירת רקעים וירטואליים בזמן אמת, דרך תיקוני צבע אוטומטיים ועד אנימציות מורכבות.",
                image: "assets/20250223_151808.jpg"
            },
            
            // Services Pages
            service_live: {
                title: "הפקות וידאו ושידורים חיים",
                type: "service",
                videoId: "px7UwM8QDDU",
                partnerId: "golive", // Linked to Go Live
                desc: "שירות הדגל שלנו. אנו מספקים מעטפת מלאה לשידורים חיים בכל סדר גודל. בין אם זה כנס חברה, אירוע ספורט או מופע תרבות, אנחנו שם עם הטכנולוגיה המתקדמת ביותר. המומחיות שלנו כוללת שידורים מרובי מצלמות (Multi-Camera), שילוב גרפיקה בזמן אמת, שידורים היברידיים המשלבים קהל באולם וקהל בבית, ופתרונות שידור IP מתקדמים לכל רשת חברתית או פלטפורמה ייעודית.",
                gallery: [
                    "assets/20250214_192736.jpg",
                    "assets/20250215_175104.jpg",
                    "assets/20250223_151800.jpg",
                    "assets/20250223_151818.jpg"
                ]
            },
            service_ai: {
                title: "יצירת תוכן AI & On The Fly",
                type: "service",
                videoId: "d2_lJ42GuZ0",
                desc: "המהפכה כבר כאן, ואנחנו מובילים אותה. שירות זה מאפשר לייצר ויזואליה מרהיבה ללא צורך בימי צילום יקרים. אנחנו משתמשים במחוללי תמונות ווידאו מתקדמים כדי ליצור סטוריבורדים, הדמיות, רקעים וירטואליים ואפילו דמויות דיגיטליות. היכולת ליצור תוכן 'On The Fly' (תוך כדי תנועה) מאפשרת גמישות אדירה ותגובה מהירה לטרנדים ולשינויים בזמן אמת.",
                gallery: [
                    "assets/20250223_151534.jpg",
                    "assets/20250223_151808.jpg",
                    "assets/20250216_122459.jpg",
                    "assets/20250222_122300.jpg"
                ]
            },
            service_virtual: {
                title: "כנסים וירטואליים והיברידיים",
                type: "service",
                videoId: "Z3oO_GmtFfg",
                partnerId: "pentera", // Linked to Pentera
                desc: "העולם השתנה, וגם הכנסים. אנו מתמחים ביצירת חוויות אימרסיביות המטשטשות את הגבול בין המציאות למסך. באמצעות אולפנים וירטואליים (Green Screen) וטכנולוגיות AR, אנחנו מביאים דוברים מכל העולם לבמה אחת משותפת. המערכות שלנו מאפשרות אינטראקציה מלאה עם הקהל, סקרים בזמן אמת וחדרי נטוורקינג וירטואליים.",
                gallery: [
                    "assets/20250215_175100.jpg",
                    "assets/20250215_175124.jpg",
                    "assets/20250215_175126(0).jpg",
                    "assets/20250215_192652.jpg"
                ]
            },
            service_post: {
                title: "פוסט-פרודקשן מתקדם",
                type: "service",
                videoId: "_rv2sMdyCpg",
                desc: "הקסם הסופי קורה בעריכה. מחלקת הפוסט שלנו כוללת עורכים, אמני אפקטים (VFX) ואנימטורים מהשורה הראשונה. אנחנו מטפלים בהכל: Offline, Online, תיקוני צבע (Color Grading), עיצוב סאונד ומיקס. הגישה שלנו היא לספר את הסיפור בצורה המהודקת והמרגשת ביותר, תוך עמידה בלוחות זמנים צפופים.",
                gallery: [
                    "assets/20250222_122141.jpg",
                    "assets/20250222_122150.jpg",
                    "assets/20250222_122206.jpg",
                    "assets/20250216_122300.jpg"
                ]
            },

            // Projects (Specific)
            mindfly: partnersData.find(p => p.id === 'mindfly'), // Reusing partner data structure
            
            nba: {
                title: "NBA All-Stars RF Engineering",
                type: "cinematch",
                stats: { score: "HIGH TECH", tech: "RF / Wireless", emotion: "Precision" },
                text: "תפקיד RF Engineer באירוע האולסטארס. אחריות מלאה על תשדורת אלחוטית ממצלמות חזה (Chest Cam) שנלבשו על ידי השחקנים בזמן אמת במשחקי כדורסל והוקי. אתגר טכנולוגי בסביבה רווית תדרים.",
                image: "assets/20250215_052712.jpg"
            },
            solties: {
                title: "Solties - Live Extreme Event",
                type: "cinematch",
                stats: { score: "LIVE STREAM", tech: "Multi-Cam", emotion: "Fun" },
                text: "הפקה ושידור חי של אירוע אקסטרים בבריכה שנמשך 3 שעות. ניהול שידור רציף, שילוב גרפיקה ועריכת Highlights בזמן אמת.",
                videoId: "GqMse9F2ipY", // Live stream ID
                extraVideoId: "Y8DxFX8sooI", // Edited ID
                image: "https://img.youtube.com/vi/GqMse9F2ipY/maxresdefault.jpg"
            }
        };

        // --- Translations Data ---
        const translations = {
            he: {
                nav_home: "ראשי", nav_about: "אודות", nav_work: "CINE MATCH", nav_services: "שירותים", nav_ecosystem: "מעגלי עבודה", nav_contact: "צור קשר", nav_recommendations: "המלצות",
                hero_title: "הנדסת חוויות ויזואליות", hero_subtitle: "איפה שטכנולוגיה פוגשת רגש בזמן אמת", hero_desc: "אנחנו לא רק מפיקים תוכן, אנחנו מהנדסים רגעים. שילוב עוצמתי בין שידורים חיים, קוד יצירתי ובינה מלאכותית שמשנה את חוקי המשחק והופכת כל פיקסל לסיפור.", hero_cta_start: "התחילו פרויקט", hero_cta_work: "למעגלי העבודה",
                stat_productions: "הפקות מוצלחות", stat_countries: "מדינות בעולם", stat_support: "זמינות ויצירה",
                about_title: "מי אנחנו", about_intro: "בנקודת המפגש שבין ביצוע טכני מושלם לחזון אומנותי פורץ דרך.", about_subtitle: "מקוד לאומנות: המסע של כל פרויקט", about_text: "העולם הדיגיטלי דורש מהירות של מכונה ונשמה של אומן. השיטה שלנו ייחודית: אנחנו מפרקים כל אתגר לגורמים טכניים ומרכיבים אותם מחדש ליצירה ויזואלית חיה.", about_text2: "זה לא רק \"לצלם ולערוך\". זה לבנות מערכות שמגיבות בזמן אמת, לייצר יש מאין באמצעות AI, ולדעת שברגע האמת - בשידור החי - הכל יעבוד כמו שעון שוויצרי. הניסיון שלנו נפרש על פני למעלה מ-13 שנים, בהן פיתחנו התמחויות ייחודיות ופתרונות קצה לקצה עבור הלקוחות הגדולים במשק.",
                process_1: "אסטרטגיה", process_1_desc: "תכנון אדריכלי של האירוע או התוכן, מהמסר ועד לפיקסל.",
                process_2: "הפקה חיה", process_2_desc: "ביצוע טכני ללא פשרות, ניהול צוותים וניתוב בזמן אמת.",
                process_ai: "AI & Tech", process_ai_desc: "העצמת הויזואל עם כלים מחוללי תמונה וקוד.",
                section_ecosystem: "הסינרגיה שלנו: מעגלי עבודה ושותפים", ecosystem_desc: "אנחנו לא מאמינים ביחסי ספק-לקוח סטנדרטיים. הלקוחות שלנו הם הקולגות שלנו. זה יד לוחצת יד. אנחנו מפרים אחד את השני בקריאייטיב, ביכולות הניהול ובהפקת פרויקטים מורכבים.",
                section_solutions: "השירותים שלנו",
                sol_live_title: "הפקות וידאו ושידורים חיים", sol_live_short: "מולטי-קאמרה, ניתוב בזמן אמת ושידור לכל פלטפורמה.",
                sol_ai_title: "יצירת תוכן AI & On The Fly", sol_ai_short: "שתילת אובייקטים, הנפשת תמונות ויצירת עולמות ללא גבול פיזי.",
                sol_virtual_title: "כנסים וירטואליים והיברידיים", sol_virtual_short: "שילוב דוברים מהאולפן ומהבית בסביבה אימרסיבית.",
                sol_post_title: "פוסט-פרודקשן מתקדם", sol_post_short: "עריכה, צבע, ואנימציה שסוגרים את המעגל.",
                section_testimonials: "המלצות",
                contact_title: "בואו ניצור משהו מדהים", contact_desc: "יש לכם חזון? לנו יש את הכלים להגשים אותו.", btn_email: "שלחו מייל", contact_name: "אוריין אדלני"
            },
            en: {
                nav_home: "Home", nav_about: "About", nav_work: "CINE MATCH", nav_services: "Services", nav_ecosystem: "Ecosystem", nav_contact: "Contact", nav_recommendations: "Testimonials",
                hero_title: "Visual Experience Engineering", hero_subtitle: "Where Technology Meets Emotion in Real-Time", hero_desc: "We don't just produce content; we engineer moments. A powerful fusion of live broadcasting, creative coding, and AI that changes the rules of the game and turns every pixel into a story.", hero_cta_start: "Start a Project", hero_cta_work: "View Work",
                stat_productions: "Successful Productions", stat_countries: "Countries Worldwide", stat_support: "Creation Availability",
                about_title: "About Us", about_intro: "At the intersection of perfect technical execution and groundbreaking artistic vision.", about_subtitle: "From Code to Art: The Journey of Every Project", about_text: "The digital world demands the speed of a machine and the soul of an artist. Our method is unique: we deconstruct every challenge into technical factors and reassemble them into a living visual creation.", about_text2: "It's not just \"shoot and edit\". It's building systems that respond in real-time, creating from nothing using AI, and knowing that at the moment of truth - the live broadcast - everything will work like a Swiss watch. Our experience spans over 13 years, developing unique specializations and end-to-end solutions for market leaders.",
                process_1: "Strategy", process_1_desc: "Architectural planning of the event or content, from message to pixel.",
                process_2: "Live Production", process_2_desc: "Uncompromising technical execution, team management, and real-time switching.",
                process_ai: "AI & Tech", process_ai_desc: "Empowering visuals with image-generating tools and code.",
                section_ecosystem: "Our Synergy: Work Circles & Partners", ecosystem_desc: "We don't believe in standard supplier-client relationships. Our clients are our colleagues. Hand shakes hand. We cross-pollinate creative, management, and production capabilities.",
                section_solutions: "Our Services",
                sol_live_title: "Video Production & Live Broadcast", sol_live_short: "Multi-camera, real-time switching, and broadcasting to any platform.",
                sol_ai_title: "AI Content & On The Fly", sol_ai_short: "Object embedding, image animation, and creating worlds without physical boundaries.",
                sol_virtual_title: "Virtual & Hybrid Conferences", sol_virtual_short: "Integrating studio and remote speakers in an immersive environment.",
                sol_post_title: "Advanced Post-Production", sol_post_short: "Editing, color, and animation closing the loop.",
                section_testimonials: "Testimonials",
                contact_title: "Let's Create Magic", contact_desc: "Have a vision? We have the tools to make it happen.", btn_email: "Send Email", contact_name: "Orian Edelenyi"
            }
        };

        // --- Modal Logic with Stats Counter ---
        function openModal(contentId) {
            // Check if it's a partner/work circle
            const partner = partnersData.find(p => p.id === contentId);
            
            let data;
            let isPartner = false;

            if (partner) {
                data = partner;
                isPartner = true;
            } else {
                data = contentData[contentId];
            }

            if (!data) return;

            const modalOverlay = document.getElementById('modal-overlay');
            const modalInner = document.getElementById('modal-inner');
            
            let htmlContent = `
                <button class="modal-close" onclick="closeModal()">✕</button>
                <div class="p-8 md:p-16">
            `;

            // PARTNER BADGE LOGIC (New)
            let partnerHtml = '';
            if (data.partnerId) {
                const pObj = partnersData.find(p => p.id === data.partnerId);
                if (pObj) {
                    partnerHtml = `
                        <div class="partner-badge mb-6">
                            <span class="text-muted-custom text-sm">בשיתוף:</span>
                            <img src="${pObj.logo}" alt="${pObj.name}" style="height: 30px;">
                            <span class="font-bold">${pObj.name}</span>
                        </div>
                    `;
                }
            }

            if (isPartner) {
                // Partner / Work Circle Modal
                htmlContent += `
                    <div class="flex flex-col md:flex-row gap-12 items-center mb-12">
                        <div class="w-full md:w-1/3 flex justify-center">
                            <div class="w-56 h-56 rounded-3xl bg-white border border-[var(--primary)] flex items-center justify-center p-6 shadow-[0_0_40px_rgba(0,242,255,0.15)] overflow-hidden">
                                <img src="${data.logo}" class="max-w-full max-h-full object-contain" alt="${data.name}">
                            </div>
                        </div>
                        <div class="w-full md:w-2/3 text-center md:text-right">
                            <h2 class="text-4xl md:text-6xl font-bold mb-4 text-[var(--primary)] glitch-text" data-text="${data.name}">${data.name}</h2>
                            <h3 class="text-2xl text-white mb-8 font-light tracking-widest uppercase opacity-80">${data.role}</h3>
                            <div class="h-1 w-32 bg-[var(--secondary)] mb-8 mx-auto md:mx-0"></div>
                            <p class="text-xl text-[var(--text-color)] leading-loose">${data.desc}</p>
                        </div>
                    </div>
                `;

                // --- Add Stats Bar if Available ---
                if (data.stats) {
                    htmlContent += `
                        <div class="client-stats-container">
                            <div class="client-stat-box">
                                <div class="client-stat-value" data-stat-target="${data.stats.hours.replace('+','')}" data-stat-suffix="+">${data.stats.hours}</div>
                                <div class="client-stat-label">שעות הפקה</div>
                            </div>
                            <div class="client-stat-box">
                                <div class="client-stat-value">${data.stats.projects}</div>
                                <div class="client-stat-label">פרויקטים</div>
                            </div>
                            <div class="client-stat-box">
                                <div class="client-stat-value" style="font-size: 1.5rem; line-height: 3rem;">${data.stats.period}</div>
                                <div class="client-stat-label">תקופת פעילות</div>
                            </div>
                            <div class="client-stat-box">
                                <div class="client-stat-value" style="font-size: 1.5rem; line-height: 3rem;">${data.stats.peak}</div>
                                <div class="client-stat-label">Peak Time</div>
                            </div>
                        </div>
                    `;
                }

            } else if (data.type === 'service' || data.type === 'cinematch') {
                // Service / Project Page Layout
                htmlContent += `
                    ${partnerHtml}
                    <h2 class="text-4xl md:text-6xl font-bold mb-8 text-[var(--primary)] text-center">${data.title}</h2>
                    
                    ${data.videoId ? `
                    <div class="mb-12 rounded-2xl overflow-hidden shadow-2xl border border-[var(--glass-border)] aspect-video relative">
                         <iframe width="100%" height="100%" src="https://www.youtube.com/embed/${data.videoId}?autoplay=1&mute=1&controls=1" title="Video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>` : ''}

                    ${data.extraVideoId ? `
                    <div class="mb-10">
                        <h4 class="text-xl font-bold mb-4 text-center">תוכן ערוך</h4>
                        <div class="rounded-3xl overflow-hidden shadow-2xl border border-[var(--glass-border)] aspect-video relative">
                             <iframe width="100%" height="100%" src="https://www.youtube.com/embed/${data.extraVideoId}?controls=1" title="Edited Video" frameborder="0" allowfullscreen></iframe>
                        </div>
                    </div>` : ''}

                     ${data.image && !data.videoId ? `
                    <div class="mb-10 rounded-3xl overflow-hidden shadow-2xl border border-[var(--glass-border)] h-80 relative">
                         <img src="${data.image}" class="w-full h-full object-cover">
                    </div>` : ''}

                    <div class="prose prose-lg prose-invert max-w-none mb-16 text-center">
                        <p class="text-2xl leading-relaxed text-[var(--text-color)] opacity-90">${data.desc || data.text}</p>
                    </div>

                    ${data.gallery ? `
                    <h3 class="text-3xl font-bold mb-8 border-b border-[var(--glass-border)] pb-4 text-center">גלריה</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        ${data.gallery.map(img => `<div class="rounded-xl overflow-hidden h-48 border border-[var(--glass-border)]"><img src="${img}" class="w-full h-full object-cover hover:scale-110 transition-transform duration-500"></div>`).join('')}
                    </div>` : ''}
                `;
            } else {
                // Default / Simple Modal (Process)
                htmlContent += `
                    <h2 class="text-4xl md:text-6xl font-bold mb-8 text-[var(--primary)] text-center">${data.title}</h2>
                    <div class="flex flex-col md:flex-row gap-12 items-center">
                        <div class="w-full md:w-1/2 rounded-2xl overflow-hidden border border-[var(--glass-border)] shadow-2xl">
                            <img src="${data.image}" class="w-full h-80 object-cover">
                        </div>
                        <div class="w-full md:w-1/2">
                            <p class="text-2xl text-[var(--text-color)] leading-relaxed">${data.text}</p>
                        </div>
                    </div>
                `;
            }

            htmlContent += `</div>`;
            modalInner.innerHTML = htmlContent;
            modalOverlay.classList.add('active');
            document.body.style.overflow = 'hidden'; 
            
            // Trigger stat animation if stats exist
            if(isPartner && data.stats) {
                setTimeout(() => {
                    document.querySelectorAll('[data-stat-target]').forEach(el => {
                        const target = parseInt(el.getAttribute('data-stat-target'));
                        const suffix = el.getAttribute('data-stat-suffix') || '';
                        animateStatValue(el, 0, target, 1500, suffix);
                    });
                }, 300);
            }
        }

        function animateStatValue(obj, start, end, duration, suffix) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start) + suffix;
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        function closeModal() {
            const modalOverlay = document.getElementById('modal-overlay');
            modalOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        document.getElementById('modal-overlay').addEventListener('click', (e) => {
            if (e.target.id === 'modal-overlay') closeModal();
        });

        // --- Theme Management ---
        const themeBtns = document.querySelectorAll('.theme-btn');
        const sunIcon = document.getElementById('icon-sun');
        const moonIcon = document.getElementById('icon-moon');
        let particlesMaterial; 

        const updateThemeIcons = (isDark) => {
            if(isDark) {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            } else {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }
            if(particlesMaterial) {
                particlesMaterial.color.setHex(isDark ? 0x00f2ff : 0x1a1a1a);
                particlesMaterial.opacity = isDark ? 0.8 : 0.5;
            }
        };

        const toggleTheme = () => {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');
            if(isDark) {
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                updateThemeIcons(false);
            } else {
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                updateThemeIcons(true);
            }
        };

        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme === 'light') {
            document.documentElement.classList.remove('dark');
            updateThemeIcons(false);
        } else if (savedTheme === 'dark') {
            document.documentElement.classList.add('dark');
            updateThemeIcons(true);
        } else {
            if(!prefersDark) {
                document.documentElement.classList.remove('dark');
                updateThemeIcons(false);
            } else {
                 updateThemeIcons(true);
            }
        }

        themeBtns.forEach(btn => btn.addEventListener('click', toggleTheme));


        // --- Language Logic ---
        const setLanguage = (lang) => {
            const elements = document.querySelectorAll('[data-key]');
            elements.forEach(el => {
                const key = el.getAttribute('data-key');
                if(translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });

            const glitchText = document.querySelector('.glitch-text');
            if(glitchText) {
                const spanContent = lang === 'he' ? 'ויזואליות' : 'Engineering';
                const plainContent = lang === 'he' ? 'הנדסת חוויות ' : 'Visual Experience ';
                glitchText.innerHTML = `${plainContent}<span style="color:transparent; -webkit-text-stroke: 2px var(--primary);">${spanContent}</span>`;
                glitchText.setAttribute('data-text', plainContent + spanContent);
                
                // Restart glitch animation on language change
                glitchText.classList.remove('glitch-active');
                void glitchText.offsetWidth; // Trigger reflow
                glitchText.classList.add('glitch-active');
            }

            document.documentElement.dir = lang === 'he' ? 'rtl' : 'ltr';
            document.documentElement.lang = lang;
            
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
        };

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const lang = e.target.dataset.lang;
                setLanguage(lang);
            });
        });

        // --- Three.js Background Animation ---
        const initThreeJS = () => {
            const container = document.getElementById('webgl-container');
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            const particlesGeometry = new THREE.BufferGeometry();
            const particlesCount = 700;
            const posArray = new Float32Array(particlesCount * 3);

            for(let i = 0; i < particlesCount * 3; i++) {
                posArray[i] = (Math.random() - 0.5) * 15;
            }

            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

            const isDark = document.documentElement.classList.contains('dark');
            
            particlesMaterial = new THREE.PointsMaterial({
                size: 0.02,
                color: isDark ? 0x00f2ff : 0x1a1a1a,
                transparent: true,
                opacity: isDark ? 0.8 : 0.5,
            });

            const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(particlesMesh);

            camera.position.z = 3;

            let mouseX = 0, mouseY = 0, targetX = 0, targetY = 0;
            const windowHalfX = window.innerWidth / 2;
            const windowHalfY = window.innerHeight / 2;

            document.addEventListener('mousemove', (event) => {
                mouseX = (event.clientX - windowHalfX);
                mouseY = (event.clientY - windowHalfY);
            });

            const animate = () => {
                requestAnimationFrame(animate);
                targetX = mouseX * 0.001;
                targetY = mouseY * 0.001;
                particlesMesh.rotation.y += 0.001;
                particlesMesh.rotation.x += 0.0005;
                particlesMesh.rotation.y += 0.05 * (targetX - particlesMesh.rotation.y);
                particlesMesh.rotation.x += 0.05 * (targetY - particlesMesh.rotation.x);
                renderer.render(scene, camera);
            };

            animate();

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };

        // --- Scroll Reveal ---
        const initScrollReveal = () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if(entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.2 });
            document.querySelectorAll('.scroll-reveal').forEach(el => observer.observe(el));
            window.addEventListener('scroll', () => {
                const header = document.getElementById('main-header');
                if(window.scrollY > 50) header.classList.add('scrolled');
                else header.classList.remove('scrolled');
            });
        };

        // --- Helper: Number Animation (ADDED TO FIX ERROR) ---
        function runNumberAnimation(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // --- ROTATING Stats Animation Logic ---
        const initRotatingStats = () => {
            const container = document.getElementById('stats-container');
            
            // 3 Different Sets of Stats
            const statsSets = [
                // Set 1: Classic History
                [
                    { num: 13, suffix: '+', label: 'שנות פעילות' },
                    { num: 1200, suffix: '+', label: 'הפקות מוצלחות' },
                    { num: 25, suffix: '+', label: 'מדינות בעולם' },
                    { num: 24, suffix: '/7', label: 'זמינות ויצירה' }
                ],
                // Set 2: Technical & Impact
                [
                    { num: 1, suffix: 'M+', label: 'צופים בשידור חי' },
                    { num: 50, suffix: '+', label: 'אנשי צוות' },
                    { num: 4, suffix: 'K', label: 'רזולוציית שידור' },
                    { num: 6, suffix: '+', label: 'שפות שידור' }
                ],
                // Set 3: Service & Quality
                [
                    { num: 100, suffix: '%', label: 'אחוזי הצלחה' },
                    { num: 500, suffix: '+', label: 'לקוחות מרוצים' },
                    { num: 0, suffix: '', label: 'תקלות שידור' },
                    { num: 8, suffix: '+', label: 'פתרונות טכנולוגיים' }
                ]
            ];

            let currentSetIndex = 0;

            const renderStats = (setIndex) => {
                const currentSet = statsSets[setIndex];
                
                // 1. Clear current content with fade out
                container.classList.add('fading');

                setTimeout(() => {
                    // 2. Build new HTML
                    container.innerHTML = currentSet.map((stat, idx) => `
                        <div class="hover-trigger count-container group py-4 md:py-0">
                            <div class="stat-number group-hover:text-[var(--primary)] transition-colors" data-target="${stat.num}" data-suffix="${stat.suffix}">0</div>
                            <span class="text-6xl font-black text-muted-custom align-super">${stat.suffix}</span>
                            <p class="text-muted-custom tracking-[0.3em] uppercase mt-4 font-bold text-2xl">${stat.label}</p>
                        </div>
                    `).join('');

                    // 3. Trigger number animation for new elements
                    const newElements = container.querySelectorAll('.stat-number');
                    newElements.forEach(el => {
                        const target = parseInt(el.getAttribute('data-target'));
                        // Using the new helper function
                        runNumberAnimation(el, 0, target, 1500); 
                    });

                    // 4. Fade in
                    container.classList.remove('fading');

                }, 600); // Wait for fade out
            };

            // Initial Render
            renderStats(0);

            // Interval Rotation
            setInterval(() => {
                currentSetIndex = (currentSetIndex + 1) % statsSets.length;
                renderStats(currentSetIndex);
            }, 6000); // Change every 6 seconds
        };


        // --- Service List Interaction ---
        const initServices = () => {
            const listItems = document.querySelectorAll('.service-list-item');
            const previews = document.querySelectorAll('.preview-media');

            listItems.forEach(item => {
                item.addEventListener('mouseenter', () => {
                    // Remove active from all
                    listItems.forEach(i => i.classList.remove('active'));
                    previews.forEach(p => p.classList.remove('active'));

                    // Add active to current
                    item.classList.add('active');
                    const targetId = item.getAttribute('data-target');
                    const targetPreview = document.getElementById(targetId);
                    if(targetPreview) targetPreview.classList.add('active');
                });
            });
        };

        // --- Init Ticker ---
        const initTicker = () => {
            const content = document.getElementById('ticker-content');
            
            // Build HTML
            const tickerItems = partnersData.map(p => `
                <div class="partner-logo-card hover-trigger" onclick="openModal('${p.id}')">
                    <img src="${p.logo}" alt="${p.name}">
                    <span class="partner-name">${p.name}</span>
                </div>
            `).join('');

            // Duplicate content for seamless scrolling loop
            content.innerHTML = tickerItems + tickerItems + tickerItems;

            // Draggable Logic
            const wrapper = document.getElementById('draggable-ticker');
            let isDown = false;
            let startX;
            let scrollLeft;

            wrapper.addEventListener('mousedown', (e) => {
                isDown = true;
                wrapper.classList.add('active');
                startX = e.pageX - wrapper.offsetLeft;
                scrollLeft = wrapper.scrollLeft;
                content.style.animationPlayState = 'paused';
            });

            wrapper.addEventListener('mouseleave', () => {
                isDown = false;
                wrapper.classList.remove('active');
                content.style.animationPlayState = 'running';
            });

            wrapper.addEventListener('mouseup', () => {
                isDown = false;
                wrapper.classList.remove('active');
                content.style.animationPlayState = 'running';
            });

            wrapper.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - wrapper.offsetLeft;
                const walk = (x - startX) * 2;
                wrapper.scrollLeft = scrollLeft - walk;
            });
        }

        // --- Video Logic ---
        let playerA, playerB, activePlayer = 'A';
        let isMuted = true;
        const videos = [
             { videoId: 'GqMse9F2ipY', duration: 300 }, // Solties Live
             { videoId: 'Y8DxFX8sooI', duration: 180 }, // Solties Edited
             { videoId: '_rv2sMdyCpg', duration: 258 }, // Showreel
             { videoId: 'Z3oO_GmtFfg', duration: 112 }, // Virtual
             { videoId: 'd2_lJ42GuZ0', duration: 153 }, // AI
        ];

        function onYouTubeIframeAPIReady() {
            const vars = { autoplay: 1, controls: 0, disablekb: 1, fs: 0, loop: 1, modestbranding: 1, playsinline: 1, rel: 0, showinfo: 0, mute: 1 };
            playerA = new YT.Player('player-container-a', { playerVars: vars, events: { onReady: onPlayerReady, onStateChange: onPlayerStateChange } });
            playerB = new YT.Player('player-container-b', { playerVars: vars, events: { onReady: onPlayerReady, onStateChange: onPlayerStateChange } });
        }

        function onPlayerReady(e) {
            e.target.mute();
            if(e.target === playerA) loadNextVideo(playerA);
            if(e.target === playerB) loadNextVideo(playerB);
        }

        function onPlayerStateChange(e) {
            if (e.data === YT.PlayerState.ENDED) e.target.playVideo();
        }

        function loadNextVideo(player) {
            const vid = videos[Math.floor(Math.random() * videos.length)];
            player.loadVideoById({ videoId: vid.videoId, startSeconds: 10, endSeconds: 40 });
        }

        setInterval(() => {
            const current = activePlayer === 'A' ? playerA : playerB;
            const next = activePlayer === 'A' ? playerB : playerA;
            
            if(next && typeof next.loadVideoById === 'function') {
                const currentEl = document.getElementById(activePlayer === 'A' ? 'player-container-a' : 'player-container-b');
                const nextEl = document.getElementById(activePlayer === 'A' ? 'player-container-b' : 'player-container-a');
                
                loadNextVideo(next);
                
                nextEl.style.opacity = 1;
                currentEl.style.opacity = 0;
                activePlayer = activePlayer === 'A' ? 'B' : 'A';
            }
        }, 12000);

        document.getElementById('mute-btn').addEventListener('click', () => {
            isMuted = !isMuted;
            if(playerA) isMuted ? playerA.mute() : playerA.unMute();
            if(playerB) isMuted ? playerB.mute() : playerB.unMute();
            document.getElementById('mute-icon').classList.toggle('hidden', !isMuted);
            document.getElementById('unmute-icon').classList.toggle('hidden', isMuted);
        });

        // --- Mobile Menu ---
        const mobileMenu = document.getElementById('mobile-menu');
        document.getElementById('menu-btn').addEventListener('click', () => mobileMenu.classList.add('open'));
        document.getElementById('close-menu').addEventListener('click', () => mobileMenu.classList.remove('open'));
        document.querySelectorAll('.mobile-link').forEach(link => link.addEventListener('click', () => mobileMenu.classList.remove('open')));

        // --- Init All ---
        document.addEventListener('DOMContentLoaded', () => {
            initThreeJS();
            initScrollReveal();
            initRotatingStats(); // Updated call
            initServices();
            initTicker();
        });

    </script>
</body>
</html>
