<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>הסכם שירותים + טבלת פיצויים אינטראקטיבית</title>
  <!-- Icons & Fonts -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color:#4a90e2; --secondary-color:#34495e; --highlight-bg:#fff3cd;
      --card-bg:#fff; --body-bg:#f0f2f5; --text:#333; --muted:#6c757d; --border:#e8e8e8;
    }
    *{box-sizing:border-box}
    body{margin:0;padding:20px 10px;font-family:'Roboto',Arial,sans-serif;background:var(--body-bg);color:var(--text);direction:rtl;line-height:1.6}
    h1,h2,h3{font-weight:500;text-align:center;color:var(--secondary-color);margin-top:0}
    h1{font-size:1.8rem;margin-bottom:25px}
    h2{font-size:1.5rem;margin:45px 0 25px;position:relative}
    h2:before{content:'';position:absolute;top:100%;left:50%;width:120px;height:2px;background:var(--border);transform:translateX(-50%)}
    .container{max-width:900px;margin:0 auto}
    /* Controls */
    .controls{background:var(--card-bg);border:1px solid var(--border);border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,.05);padding:20px 15px;margin-bottom:30px}
    details.slider-detail{background:var(--card-bg);border:1px solid var(--border);border-radius:6px;margin-bottom:12px}
    summary.slider-summary{padding:10px 15px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;font-weight:500;color:var(--secondary-color)}
    summary.slider-summary::after{content:'\f078';font-family:'Font Awesome 5 Free';font-weight:900;transition:transform .3s ease}
    details[open] summary.slider-summary::after{transform:rotate(180deg)}
    .slider-group{padding:10px 15px 15px}
    .slider-group label{display:block;margin-bottom:6px;font-size:.95rem;font-weight:500;color:var(--secondary-color)}
    .slider-group input[type=range]{width:100%;margin-bottom:6px;height:12px;-webkit-appearance:none;background:#ddd;border-radius:6px}
    .slider-group input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:22px;height:22px;border-radius:50%;background:var(--primary-color);cursor:pointer}
    .slider-value-display{text-align:center;font-size:.9rem;color:var(--primary-color);margin-bottom:6px;font-weight:500}
    .slider-note{font-size:.8rem;color:var(--muted);text-align:center}
    /* Cards */
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:15px;margin-top:18px}
    .card{background:var(--card-bg);border:1px solid var(--border);border-radius:8px;padding:18px 12px;text-align:center;box-shadow:0 2px 6px rgba(0,0,0,.05)}
    .card-icon{font-size:1.6rem;padding:8px;border-radius:50%;margin-bottom:10px;display:inline-block}
    .card-title{font-size:.9rem;font-weight:500;margin-bottom:6px;height:2.4em;color:var(--muted)}
    .card-value{font-size:1.4rem;font-weight:bold;color:var(--primary-color)}
    .icon-rate-work{background:rgba(23,162,184,.1);color:#17a2b8}.icon-rate-travel{background:rgba(255,193,7,.1);color:#ffc107}.icon-sum-work{background:rgba(40,167,69,.1);color:#28a745}.icon-sum-travel{background:rgba(0,123,255,.1);color:#007bff}.icon-ops-expense{background:rgba(220,53,69,.1);color:#dc3545}.icon-comp-total{background:rgba(108,117,125,.1);color:#6c757d}.icon-hours{background:rgba(255,87,34,.1);color:#ff5722}
    /* Contract */
    details.contract-section{background:var(--card-bg);border:1px solid var(--border);border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,.05);margin-bottom:20px}
    summary.contract-header{padding:15px 20px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;font-size:1.1rem;color:#fff;background:var(--secondary-color)}
    summary.contract-header::after{content:'\f078';font-family:'Font Awesome 5 Free';font-weight:900;font-size:.9rem;margin-right:10px;transition:transform .3s ease}
    details[open] summary.contract-header::after{transform:rotate(180deg)}
    .contract-content{padding:22px 25px;border-top:1px solid var(--border);direction:ltr;text-align:left;font-size:.95rem}
    .contract-content table{width:100%;border-collapse:collapse;margin:20px 0;font-size:.93rem}
    .contract-content th,.contract-content td{border:1px solid #ddd;padding:10px 12px;vertical-align:top}
    .contract-content th{background:#f8f9fa;font-weight:600;color:#555}.totalRow td{font-weight:bold;background:#f8f9fa}
    .highlight{background:var(--highlight-bg);padding:2px 5px;border-radius:3px;font-weight:600;color:#856404}
    .retainerVal{background:var(--highlight-bg);padding:2px 5px;border-radius:3px;font-weight:600;color:#856404}
    @media(max-width:600px){.card{padding:12px 10px}.card-icon{font-size:1.4rem}.card-value{font-size:1.2rem}summary.contract-header{font-size:1rem;padding:12px 15px}.contract-content{padding:15px}}
  </style>
</head>
<body>
  <div class="container">
    <h1><i class="fas fa-file-signature" style="color:var(--primary-color)"></i> הסכם שירותים & מחשבון פיצויים</h1>

    <!-- Interactive Table -->
    <section aria-label="interactive compensation table">
      <h2><i class="fas fa-calculator" style="color:var(--primary-color)"></i> טבלת פיצויים אינטראקטיבית</h2>

      <div class="controls">
        <!-- Retainer Slider -->
        <details class="slider-detail" open>
          <summary class="slider-summary">ריטיינר: <span id="retainerSum">$8,650.00</span></summary>
          <div class="slider-group">
            <label for="retainer">ריטיינר חודשי ($):</label>
            <input id="retainer" type="range" min="1000" max="20000" step="50" value="8650">
            <div id="retainerDisplay" class="slider-value-display"></div>
            <p class="slider-note">שנו את הסליידר לעדכון סכום הריטיינר.</p>
          </div>
        </details>
        <!-- Work Days Slider -->
        <details class="slider-detail">
          <summary class="slider-summary">ימי עבודה: <span id="workSum">10 ימים</span></summary>
          <div class="slider-group">
            <label for="workDays">ימי עבודה/הכנה:</label>
            <input id="workDays" type="range" min="0" max="30" step="1" value="10">
            <div id="workDaysDisplay" class="slider-value-display"></div>
          </div>
        </details>
        <!-- Travel Days Slider -->
        <details class="slider-detail">
          <summary class="slider-summary">ימי נסיעה: <span id="travelSum">11 ימים</span></summary>
          <div class="slider-group">
            <label for="travelDays">ימי נסיעה:</label>
            <input id="travelDays" type="range" min="0" max="30" step="1" value="11">
            <div id="travelDaysDisplay" class="slider-value-display"></div>
          </div>
        </details>
        <!-- Ops Rate Slider -->
        <details class="slider-detail">
          <summary class="slider-summary">הוצאות ליום נסיעה: <span id="opsSum">$205.00</span></summary>
          <div class="slider-group">
            <label for="opsRate">הוצאות מנהל ליום נסיעה ($):</label>
            <input id="opsRate" type="range" min="0" max="500" step="5" value="205">
            <div id="opsRateDisplay" class="slider-value-display"></div>
          </div>
        </details>
      </div>

      <div class="cards">
        <div class="card"><div class="card-icon icon-rate-work"><i class="fas fa-tags"></i></div><div class="card-title">תעריף ליום עבודה</div><div id="rateWorkValue" class="card-value"></div></div>
        <div class="card"><div class="card-icon icon-rate-travel"><i class="fas fa-tags"></i></div><div class="card-title">תעריף ליום נסיעה</div><div id="rateTravelValue" class="card-value"></div></div>
        <div class="card"><div class="card-icon icon-sum-work"><i class="fas fa-calendar-check"></i></div><div class="card-title">סכום ימי עבודה</div><div id="sumWorkValue" class="card-value"></div></div>
        <div class="card"><div class="card-icon icon-sum-travel"><i class="fas fa-plane"></i></div><div class="card-title">סכום ימי נסיעה</div><div id="sumTravelValue" class="card-value"></div></div>
        <div class="card"><div class="card-icon icon-ops-expense"><i class="fas fa-file-invoice-dollar"></i></div><div class="card-title">הוצאות מנהל תפעול</div><div id="opsExpenseValue" class="card-value"></div></div>
        <div class="card"><div class="card-icon icon-comp-total"><i class="fas fa-hand-holding-usd"></i></div><div class="card-title">סך הכל פיצוי</div><div id="compTotalValue" class="card-value"></div></div>
        <div class="card"><div class="card-icon icon-hours"><i class="fas fa-clock"></i></div><div class="card-title">סה"כ שעות עבודה</div><div id="totalWorkHoursValue" class="card-value"></div></div>
        <div class="card"><div class="card-icon icon-hours"><i class="fas fa-clock"></i></div><div class="card-title">סה"כ שעות נסיעה</div><div id="totalTravelHoursValue" class="card-value"></div></div>
      </div>
    </section>

    <!-- Contract -->
    <h2><i class="fas fa-file-contract"></i> טיוטת הסכם שירותים</h2>

    <details class="contract-section">
      <summary class="contract-header"><span>ℹ️ Parties & Preamble</span><span>פרטים ורקע</span></summary>
      <div class="contract-content">
        <p><strong>To:</strong> Orian Edelenyi (“Operational Manager”)</p>
        <p><strong>From:</strong> MindFly Ltd. (in formation) (the “Company”)</p>
        <p><strong>Date:</strong> April 21 2025</p>
        <p>MindFly Ltd…. (פסקת רקע)</p>
      </div>
    </details>

    <details class="contract-section">
      <summary class="contract-header"><span>🛠️ 2. Services</span><span>שירותים</span></summary>
      <div class="contract-content"><p>…</p></div>
    </details>

    <details class="contract-section" open>
      <summary class="contract-header"><span>💰 3. Remuneration & Expenses</span><span>תמורה והוצאות</span></summary>
      <div class="contract-content">
        <h3>3.1 Scope of Work</h3>
        <ul>
          <li>ההסכם מכסה כ‑<span class="highlight" id="scopeGames">5</span> משחקים בחודש.</li>
          <li>כ‑<span class="highlight" id="scopeWorkDays">10</span> ימי עבודה ו‑<span class="highlight" id="scopeTravelDays">11</span> ימי נסיעה בממוצע.</li>
        </ul>
        <h3>3.2 Fixed Monthly Retainer Calculation</h3>
        <table>
          <thead><tr><th>Component</th><th>Effective Rate (USD)</th><th>Qty</th><th>Subtotal</th></tr></thead>
          <tbody>
            <tr><td>Work Days Compensation</td><td id="tblRateWork" class="highlight">$356.86 / day</td><td id="tblQtyWork">10</td><td id="tblSubtotalWork">$3,568.60</td></tr>
            <tr><td>Travel Days Compensation</td><td id="tblRateTravel" class="highlight">$256.86 / day</td><td id="tblQtyTravel">11</td><td id="tblSubtotalTravel">$2,825.46</td></tr>
            <tr class="totalRow"><td colspan="3">Total Compensation Component</td><td id="tblTotalComp">$6,394.06</td></tr>
            <tr><td colspan="3">Expense Component (Travel Days)</td><td id="tblExpenseComp">$2,255.00</td></tr>
            <tr class="totalRow"><td colspan="3">Total Fixed Monthly Retainer</td><td class="retainerVal" id="tblRetainer">$8,649.06</td></tr>
          </tbody>
        </table>
        <p class="calculationNote">התעריפים חייבים להיות ≥ $300/$200.</p>
      </div>
    </details>
    <!-- … שאר סעיפי החוזה … -->
  </div>

<script>
const BASE_RATIO = 356.86/256.86, HOURS_PER_DAY=8;
const sliders=['retainer','workDays','travelDays','opsRate'];
sliders.forEach(id=>{
  const slider=document.getElementById(id);
  const display=document.getElementById(id+'Display');
  const summary=document.getElementById(id==='retainer'?'retainerSum':id==='workDays'?'workSum':id==='travelDays'?'travelSum':'opsSum');
  slider.addEventListener('input',()=>{
    const val=+slider.value;
    if(id==='retainer'||id==='opsRate'){display.textContent='$'+val.toLocaleString(undefined,{minimumFractionDigits:2});summary.textContent=display.textContent;}
    else{display.textContent=val+' ימים';summary.textContent=display.textContent;}
    updateAll();
  });
});
function updateAll(){
  const R=+retainer.value, wd=+workDays.value, td=+travelDays.value, or=+opsRate.value;
  const opsExp=td*or, compPool=R-opsExp;
  const k=compPool/(wd*BASE_RATIO+td);
  const rateTravel=k, rateWork=BASE_RATIO*k;
  // cards
  rateTravelValue.textContent='$'+rateTravel.toFixed(2);
  rateWorkValue.textContent='$'+rateWork.toFixed(2);
  sumTravelValue.textContent='$'+(rateTravel*td).toFixed(2);
  sumWorkValue.textContent='$'+(rateWork*wd).toFixed(2);
  opsExpenseValue.textContent='$'+opsExp.toFixed(2);
  compTotalValue.textContent='$'+compPool.toFixed(2);
  totalWorkHoursValue.textContent=wd*HOURS_PER_DAY+' שעות';
  totalTravelHoursValue.textContent=td*HOURS_PER_DAY+' שעות';
  // contract dynamic fields
  scopeWorkDays.textContent=wd;
  scopeTravelDays.textContent=td;
  tblRateWork.textContent='$'+rateWork.toFixed(2)+' / day';
  tblRateTravel.textContent='$'+rateTravel.toFixed(2)+' / day';
  tblQtyWork.textContent=wd;
  tblQtyTravel.textContent=td;
  tblSubtotalWork.textContent='$'+(rateWork*wd).toFixed(2);
  tblSubtotalTravel.textContent='$'+(rateTravel*td).toFixed(2);
  tblTotalComp.textContent='$'+(rateWork*wd+rateTravel*td).toFixed(2);
  tblExpenseComp.textContent='$'+opsExp.toFixed(2);
  const totalRet=compPool.toFixed(2);
  tblRetainer.textContent='$'+(+totalRet+opsExp).toLocaleString(undefined,{minimumFractionDigits:2});
  retainerSum.textContent='$'+R.toLocaleString(undefined,{minimumFractionDigits:2});
  document.querySelectorAll('.retainerVal').forEach(el=>el.textContent='$'+R.toLocaleString(undefined,{minimumFractionDigits:2}));
}
updateAll();
</script>
</body>
</html>
