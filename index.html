<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PsychoFlash Productions – פתרונות הפקה טכניים ויצירתיים</title>
    <meta name="description" content="שירותי הפקת וידאו, שידורים חיים ופתרונות טכנולוגיים מתקדמים. השילוב המושלם בין ביצוע טכני לחדשנות יצירתית.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root {
            --primary-dark: #003f5c;
            --primary-purple: #7a5195;
            --primary-pink: #ef5675;
            --primary-orange: #ffa600;
            --text-light: #f8f9fa;
            --text-dark: #212529;
            --bg-light: #f1f5f9;
            --bg-white: #ffffff;
            --border-color: #e2e8f0;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Assistant', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
        }
        .orb-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.5;
        }

        /* --- Animation --- */
        .scroll-animate {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .scroll-animate.in-view {
            opacity: 1;
            transform: translateY(0);
        }
        /* Staggered animation delays */
        .delay-1 { transition-delay: 0.1s; }
        .delay-2 { transition-delay: 0.2s; }
        .delay-3 { transition-delay: 0.3s; }
        .delay-4 { transition-delay: 0.4s; }


        /* --- Header --- */
        header {
            position: fixed;
            top: 0; left: 0; right: 0;
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 1000;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        .header-title-container {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-dark);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        header nav { display: none; }
        @media (min-width: 1024px) {
            header nav {
                display: flex;
                align-items: center;
                gap: 0.5rem; /* Reduced gap for more items */
            }
        }
        header nav a {
            color: var(--text-dark);
            text-decoration: none;
            font-weight: 600;
            padding: 6px 12px; /* Slightly reduced padding */
            border-radius: 20px;
            font-size: 15px; /* Slightly reduced font size */
            transition: background-color 0.3s, color 0.3s;
        }
        header nav a:hover, header nav a.active {
            background-color: var(--primary-purple);
            color: var(--text-light);
        }
        .language-toggle {
            display: flex;
            gap: 8px;
            border-right: 1px solid var(--border-color);
            padding-right: 1rem;
            margin-left: -1rem; /* Visual alignment fix */
        }
        [dir="rtl"] .language-toggle {
            border-right: none;
            border-left: 1px solid var(--border-color);
            padding-right: 0;
            padding-left: 1rem;
            margin-left: 0;
            margin-right: -1rem;
        }
        .lang-btn {
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.3s;
            font-size: 1.2rem;
        }
        .lang-btn.active-lang, .lang-btn:hover { opacity: 1; }

        /* --- Hamburger & Offcanvas --- */
        .hamburger {
            display: block;
            background: none; border: none; cursor: pointer;
            z-index: 11000; padding: 10px;
        }
        @media (min-width: 1024px) { .hamburger { display: none; } }
        .hamburger span {
            display: block; width: 25px; height: 3px;
            background: var(--text-dark);
            margin: 5px 0; transition: all 0.3s;
        }
        .offcanvas-menu {
            position: fixed; top: 0; width: 280px; height: 100%;
            background: var(--text-dark); color: var(--text-light);
            z-index: 10500; padding: 80px 20px 20px;
            transition: transform 0.3s ease;
            box-shadow: -5px 0 15px rgba(0,0,0,0.5);
        }
        [dir="rtl"] .offcanvas-menu { right: 0; transform: translateX(100%); }
        [dir="ltr"] .offcanvas-menu { left: 0; transform: translateX(-100%); }
        .offcanvas-menu.active { transform: translateX(0); }
        .offcanvas-menu a {
            color: var(--text-light); text-decoration: none;
            display: block; margin-bottom: 1.5rem;
            font-size: 18px; font-weight: 600;
        }
        #close-menu-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
        }
        [dir="ltr"] #close-menu-btn {
            right: auto;
            left: 20px;
        }
        .language-toggle-mobile {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
        }
        .language-toggle-mobile .lang-btn {
            font-size: 1.5rem; /* Make flags bigger */
        }


        /* --- Main Content & Sections --- */
        main { padding-top: 70px; }
        .content-section {
            padding: 50px 20px;
            scroll-margin-top: 70px;
        }
        .section-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 30px;
            background: var(--bg-white);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.07);
        }
        .section-container h2, .section-title {
            margin-bottom: 2rem;
            font-size: 2.5rem;
            font-weight: 800;
            text-align: center;
            color: var(--primary-dark);
        }
        .section-container h3 {
            margin-top: 1.5rem; margin-bottom: 1rem;
            font-size: 1.75rem; font-weight: 700;
            color: var(--primary-purple);
        }
        .section-container p, .section-container ul li {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #334155;
        }
        [dir="rtl"] .section-container ul { list-style-type: '✓ '; padding-right: 20px; }
        [dir="ltr"] .section-container ul { list-style-type: '✓ '; padding-left: 20px; }

        /* --- Hero Section & Persona Selector --- */
        #home { padding: 60px 20px; }
        #home .hero-title {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1.2;
        }
        .info-box-clickable {
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            border-radius: 8px;
        }
        .info-box-clickable:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }
        
        .persona-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            max-width: 900px;
            margin: 2.5rem auto 0 auto;
        }
        .persona-card {
            background-color: var(--bg-white);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .persona-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            border-color: var(--primary-purple);
        }
        .persona-card.active {
            border-color: var(--primary-purple);
            background-color: #f3e8ff;
            box-shadow: 0 8px 25px rgba(122, 81, 149, 0.2);
        }
        .persona-card i {
            font-size: 2rem;
            color: var(--primary-purple);
            margin-bottom: 0.5rem;
        }
        .persona-card span {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--primary-dark);
            line-height: 1.3;
        }
        
        @media (min-width: 768px) {
            #home { padding: 80px 20px; }
            #home .hero-title { font-size: 3.5rem; }
        }


        /* --- Our Process Infographic --- */
        .timeline-container { position: relative; display: flex; justify-content: space-between; max-width: 1000px; margin: 40px auto; padding: 0 10px; }
        .timeline-line { position: absolute; top: 38px; left: 10px; right: 10px; height: 4px; background: #ccc; z-index: -1; }
        .timeline-line-progress { position: absolute; top: 0; height: 100%; background: var(--primary-purple); width: 0; transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1); }
        .phase-node { position: relative; text-align: center; width: 25%; padding: 0 5px; cursor: pointer; opacity: 0; transform: translateY(20px); transition: opacity 0.5s ease, transform 0.5s ease; }
        .phase-node.visible { opacity: 1; transform: translateY(0); }
        .phase-icon-wrapper { width: 80px; height: 80px; border-radius: 50%; background: #fff; border: 4px solid #ccc; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; transition: all 0.3s ease; }
        .phase-node.active .phase-icon-wrapper,.phase-node:hover .phase-icon-wrapper { border-color: var(--primary-purple); transform: scale(1.1); box-shadow: 0 0 15px rgba(122, 81, 149, 0.5); }
        .infographic-icon { width: 40px; height: 40px; stroke: #333; transition: stroke 0.3s; }
        .phase-node.active .infographic-icon,.phase-node:hover .infographic-icon { stroke: var(--primary-purple); }
        .phase-node h4 { font-weight: 700; color: var(--primary-dark); font-size: 0.9rem; }
        .phase-details-container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }
        .phase-details { background-color: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 25px; display: none; margin-top: 20px; }
        .phase-details h5 { color: var(--primary-purple); font-weight: 700; margin-bottom: 15px; }
        [dir="rtl"] .phase-details ul { list-style-type: '→ '; padding-right: 20px; }
        [dir="ltr"] .phase-details ul { list-style-type: '→ '; padding-left: 20px; }

        @media (max-width: 767px) {
            .timeline-container { justify-content: space-around; }
            .timeline-line { top: 30px; }
            .phase-icon-wrapper { width: 60px; height: 60px; margin-bottom: 10px; }
            .infographic-icon { width: 30px; height: 30px; }
            .phase-node h4 { font-size: 0.8rem; line-height: 1.2; }
        }
        @media (max-width: 480px) {
            .phase-node h4 { display: none; }
        }

        /* --- Pricing Section --- */
        .pricing-grid {
            display: grid; grid-template-columns: repeat(1, 1fr);
            gap: 30px; margin-top: 40px;
        }
        @media (min-width: 1024px) { .pricing-grid { grid-template-columns: repeat(3, 1fr); } }
        .pricing-card {
            background-color: var(--bg-white); border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.07);
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            display: flex; flex-direction: column;
        }
        .pricing-card.featured {
            transform: scale(1.05);
            border-color: var(--primary-purple);
        }
        .pricing-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .pricing-card-header { text-align: center; }
        .pricing-card h3 { 
            font-size: 1.5rem; 
            font-weight: 800; 
            color: var(--primary-dark); 
        }
        .pricing-card-icon {
            color: var(--primary-purple);
            margin-bottom: 1rem;
        }
        .price { 
            font-size: 2.5rem; 
            font-weight: 800; 
            color: var(--primary-purple); 
            margin: 10px 0; 
            line-height: 1;
        }
        .price .term { 
            font-size: 1rem; 
            font-weight: 600; 
            color: #64748b; 
        }
        .pricing-card ul { 
            list-style: none; 
            padding: 0; 
            margin: 20px 0; 
            text-align: right; 
            flex-grow: 1; 
        }
        [dir="ltr"] .pricing-card ul { text-align: left; }
        .pricing-card li { 
            margin-bottom: 12px; 
            display: flex; 
            align-items: flex-start;
            gap: 10px;
        }
        .pricing-card li svg {
            flex-shrink: 0;
            margin-top: 5px;
        }
        [dir="rtl"] .pricing-card li { padding-right: 0; }
        [dir="ltr"] .pricing-card li { padding-left: 0; }
        
        .cta-btn {
            display: inline-block; background-color: var(--primary-dark);
            color: var(--text-light); padding: 12px 20px;
            border-radius: 8px; text-decoration: none; font-weight: 700;
            transition: background-color 0.3s;
            text-align: center;
        }
        .cta-btn:hover { background-color: var(--primary-purple); }
        .pricing-card.featured .cta-btn { background-color: var(--primary-purple); }
        .pricing-card.featured .cta-btn:hover { background-color: var(--primary-pink); }
        .kit-fee-note {
            text-align: center;
            margin-top: 2.5rem;
            font-size: 0.9rem;
            color: #64748b;
        }

        /* --- Dynamics Section & Modal --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            z-index: 20000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .modal-container {
            background: var(--bg-white);
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .modal-overlay.active {
            opacity: 1;
        }
        .modal-overlay.active .modal-container {
            transform: scale(1);
        }
        .modal-header {
            padding: 20px 30px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-header h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-dark);
            margin: 0;
        }
        .modal-close-btn {
            background: none;
            border: none;
            font-size: 2rem;
            color: #64748b;
            cursor: pointer;
            line-height: 1;
        }
        .modal-body { padding: 30px; }
        .modal-body h4 {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-purple);
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .modal-body img {
            width: 100%;
            border-radius: 8px;
            margin-top: 1rem;
        }

        /* --- Footer --- */
        footer {
            background: var(--text-dark); color: #a0aec0;
            text-align: center; padding: 40px 20px;
            font-size: 0.9rem; margin-top: 40px;
        }
        
        /* Language-specific content */
        [data-lang]:not(.visible-lang) { display: none; }

    </style>
</head>

<body class="overflow-x-hidden">
    <canvas id="orb-canvas-back" class="orb-canvas"></canvas>

    <header>
        <div class="flex items-center gap-4">
            <button class="hamburger" id="hamburger-btn" aria-label="Menu">
                <span></span><span></span><span></span>
            </button>
             <h1 class="text-2xl font-bold text-primary-dark hidden lg:block">PsychoFlash</h1>
        </div>

        <div class="header-title-container lg:hidden" id="header-title-container">
            <span data-lang="he" class="visible-lang">PsychoFlash</span>
            <span data-lang="en">PsychoFlash</span>
        </div>
        
        <nav id="desktop-nav">
            <a href="#home" class="nav-link active">
                <span data-lang="he" class="visible-lang">ראשי</span>
                <span data-lang="en">Home</span>
            </a>
            <a href="#strategy" class="nav-link">
                <span data-lang="he" class="visible-lang">האסטרטגיה</span>
                <span data-lang="en">Strategy</span>
            </a>
            <a href="#process" class="nav-link">
                <span data-lang="he" class="visible-lang">התהליך שלנו</span>
                <span data-lang="en">Our Process</span>
            </a>
            <a href="#pricing" class="nav-link">
                <span data-lang="he" class="visible-lang">שירותים ותעריפים</span>
                <span data-lang="en">Services & Pricing</span>
            </a>
            <a href="#portal" class="nav-link">
                <span data-lang="he" class="visible-lang">פורטל לקוחות</span>
                <span data-lang="en">Client Portal</span>
            </a>
            <a href="#contact" class="nav-link">
                <span data-lang="he" class="visible-lang">צרו קשר</span>
                <span data-lang="en">Contact</span>
            </a>
             <div class="language-toggle">
                <span id="btn-he" class="lang-btn active-lang">🇮🇱</span>
                <span id="btn-en" class="lang-btn">🇺🇸</span>
            </div>
        </nav>
    </header>
    
    <div class="offcanvas-menu" id="offcanvas-menu">
        <button id="close-menu-btn" aria-label="Close menu">&times;</button>
        <a href="#home" class="nav-link">
            <span data-lang="he" class="visible-lang">ראשי</span>
            <span data-lang="en">Home</span>
        </a>
        <a href="#strategy" class="nav-link">
            <span data-lang="he" class="visible-lang">האסטרטגיה</span>
            <span data-lang="en">Strategy</span>
        </a>
        <a href="#process" class="nav-link">
            <span data-lang="he" class="visible-lang">התהליך שלנו</span>
            <span data-lang="en">Our Process</span>
        </a>
        <a href="#pricing" class="nav-link">
            <span data-lang="he" class="visible-lang">שירותים ותעריפים</span>
            <span data-lang="en">Services & Pricing</span>
        </a>
        <a href="#portal" class="nav-link">
            <span data-lang="he" class="visible-lang">פורטל לקוחות</span>
            <span data-lang="en">Client Portal</span>
        </a>
        <a href="#contact" class="nav-link">
            <span data-lang="he" class="visible-lang">צרו קשר</span>
            <span data-lang="en">Contact</span>
        </a>
        <div class="language-toggle-mobile">
            <span id="btn-he-mobile" class="lang-btn active-lang">🇮🇱</span>
            <span id="btn-en-mobile" class="lang-btn">🇺🇸</span>
        </div>
    </div>

    <main>
        
        <section id="home" class="content-section" data-title-he="PsychoFlash" data-title-en="PsychoFlash">
            <div class="text-center max-w-4xl mx-auto">
                <h1 class="hero-title scroll-animate">
                    <span data-lang="he" class="visible-lang">השילוב המושלם בין <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">ביצוע טכני</span> לחדשנות יצירתית</span>
                    <span data-lang="en">The Perfect Blend of <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">Technical Execution</span> & Creative Innovation</span>
                </h1>
                <p class="mt-4 text-lg md:text-xl text-slate-600 scroll-animate delay-1">
                    <span data-lang="he" class="visible-lang">מהפקות וידאו ושידורים חיים ועד פיתוח פתרונות תוכנה ו-AI, אנחנו כאן כדי להפוך את החזון שלכם למציאות מרשימה, חלקה ונטולת תקלות.</span>
                    <span data-lang="en">From video productions and live streams to custom software and AI solutions, we're here to turn your vision into an impressive, smooth, and flawless reality.</span>
                </p>
            </div>
        </section>

        <section id="persona-section" class="content-section !pt-0" data-title-he="קהלי יעד" data-title-en="Audiences">
             <div class="section-container mt-0 scroll-animate delay-2">
                 <h2 class="text-2xl md:text-3xl !mb-2">
                    <span data-lang="he" class="visible-lang">למי אני יכול לעזור?</span>
                    <span data-lang="en">Who Can I Help?</span>
                </h2>
                <p class="text-center max-w-3xl mx-auto">
                    <span data-lang="he" class="visible-lang">בחרו את הפרופיל המתאים לכם כדי להתאים את תוכן האתר ולראות חבילות שירות ייעודיות.</span>
                    <span data-lang="en">Select your profile to tailor the site's content and see dedicated service packages.</span>
                </p>
                <div class="persona-selector" id="persona-selector">
                    <div class="persona-card" data-persona="production">
                        <i class="fas fa-film"></i>
                        <span data-lang="he" class="visible-lang">חברות הפקה ואירועים</span>
                        <span data-lang="en">Production & Event Companies</span>
                    </div>
                    <div class="persona-card" data-persona="media">
                        <i class="fas fa-satellite-dish"></i>
                        <span data-lang="he" class="visible-lang">גופי תקשורת ואולפנים</span>
                        <span data-lang="en">Media & Studios</span>
                    </div>
                    <div class="persona-card" data-persona="brands">
                        <i class="fas fa-briefcase"></i>
                        <span data-lang="he" class="visible-lang">מותגים ועסקים</span>
                        <span data-lang="en">Brands & Businesses</span>
                    </div>
                    <div class="persona-card" data-persona="public">
                        <i class="fas fa-university"></i>
                        <span data-lang="he" class="visible-lang">גופים ציבוריים ואקדמיים</span>
                        <span data-lang="en">Public & Academic Bodies</span>
                    </div>
                     <div class="persona-card" data-persona="creators">
                        <i class="fas fa-user-astronaut"></i>
                        <span data-lang="he" class="visible-lang">יוצרים וסטארטאפים</span>
                        <span data-lang="en">Creators & Startups</span>
                    </div>
                </div>
            </div>
        </section>

        <section id="strategy" class="content-section" data-title-he="האסטרטגיה" data-title-en="The Strategy">
            <div class="section-container scroll-animate">
                <h2 class="text-2xl md:text-3xl">
                    <span data-lang="he" class="visible-lang">האסטרטגיה שלנו: לגשר בין ביצוע לחדשנות</span>
                    <span data-lang="en">Our Strategy: Bridging Execution and Innovation</span>
                </h2>
                <p class="text-center max-w-3xl mx-auto" id="strategy-subtitle">
                    <span data-lang="he" class="visible-lang">העולם המקצועי שלנו מורכב משני חלקים המשלימים זה את זה. האסטרטגיה שלנו היא להשתמש בניסיון התפעולי כדי להבין לעומק את הצרכים שלכם, וליישם את היכולות הטכנולוגיות כדי לתת להם את הפתרון הטוב ביותר.</span>
                    <span data-lang="en">Our professional world is composed of two complementary parts. Our strategy is to use our operational experience to deeply understand your needs, and apply our technological capabilities to provide the best solution.</span>
                </p>
                <div class="grid md:grid-cols-2 gap-8 mt-8">
                    <div class="text-center p-4 info-box-clickable" data-modal-trigger="tackles">
                        <i class="fas fa-cogs fa-3x text-purple-500 mb-4"></i>
                        <h3 class="m-0 text-xl font-bold">
                            <span data-lang="he" class="visible-lang">ה"תכל'ס" - הביצוע האמין</span>
                            <span data-lang="en">The "Get-it-Done" - Reliable Execution</span>
                        </h3>
                        <p class="mt-2">
                            <span data-lang="he" class="visible-lang">שנים של ניסיון בתפעול טכני מדויק, ניהול שידורים והקמות מקצועיות. זהו הבסיס היציב והאמין שמאפשר לכל הפקה לרוץ חלק, והסיבה שלקוחותינו סומכים עלינו פעם אחר פעם.</span>
                            <span data-lang="en">Years of experience in precise technical operation and professional setups. This is the stable, reliable foundation that allows every production to run smoothly, and why our clients trust us time and again.</span>
                        </p>
                    </div>
                    <div class="text-center p-4 info-box-clickable" data-modal-trigger="toolbox">
                        <i class="fas fa-lightbulb fa-3x text-pink-500 mb-4"></i>
                        <h3 class="m-0 text-xl font-bold">
                            <span data-lang="he" class="visible-lang">"ארגז הכלים" - הפתרון היצירתי</span>
                            <span data-lang="en">The "Toolbox" - The Creative Solution</span>
                        </h3>
                        <p class="mt-2">
                            <span data-lang="he" class="visible-lang">מאגר רחב של יכולות טכנולוגיות ויצירתיות, כולל פיתוח, גרפיקה מתקדמת, אוטומציה ופתרונות AI. זהו הערך המוסף שמקפיץ כל הפקה והופך אותה לייחודית ומרשימה.</span>
                            <span data-lang="en">A broad repository of technological and creative capabilities, including development, advanced graphics, automation, and AI solutions. This is the added value that elevates any production, making it unique and impressive.</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="process" class="content-section" data-title-he="התהליך שלנו" data-title-en="Our Process">
            <div class="section-container infographic-process-wrapper scroll-animate">
                <h2 class="section-title" id="process-title">
                    <span data-lang="he" class="visible-lang">התהליך שלנו: מאסטרטגיה לתוצאה</span>
                    <span data-lang="en">Our Process: From Strategy to Result</span>
                </h2>
                <p class="text-center max-w-3xl mx-auto" id="process-subtitle">
                    <span data-lang="he" class="visible-lang">אנו מאמינים שהפקה מוצלחת היא מסע מובנה. כל פרויקט, גדול כקטן, עובר דרך ארבעה שלבים מרכזיים המבטיחים איכות, יעילות ועמידה ביעדים. לחצו על כל שלב כדי ללמוד עוד.</span>
                    <span data-lang="en">We believe a successful production is a structured journey. Every project, large or small, goes through four key phases that ensure quality, efficiency, and goal achievement. Click on each phase to learn more.</span>
                </p>
                <div class="timeline-container">
                    <div class="timeline-line"><div class="timeline-line-progress"></div></div>
                    <div class="phase-node" data-phase="phase1">
                        <div class="phase-icon-wrapper"><svg xmlns="http://www.w3.org/2000/svg" class="infographic-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 21h-9a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h4"/><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" /><path d="M20.2 20.2l1.8 1.8" /><path d="M11 7h4"/><path d="M9 11h2"/><path d="M9 15h4"/></svg></div>
                        <h4>
                            <span data-lang="he" class="visible-lang">I. אסטרטגיה ותכנון</span>
                            <span data-lang="en">I. Strategy & Plan</span>
                        </h4>
                    </div>
                    <div class="phase-node" data-phase="phase2">
                        <div class="phase-icon-wrapper"><svg xmlns="http://www.w3.org/2000/svg" class="infographic-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 10l4.553 -2.276a1 1 0 0 1 1.447.894v6.764a1 1 0 0 1 -1.447.894l-4.553 -2.276v-4z" /><rect x="3" y="6" width="12" height="12" rx="2" /></svg></div>
                        <h4>
                            <span data-lang="he" class="visible-lang">II. הפקה ותפעול</span>
                            <span data-lang="en">II. Production</span>
                        </h4>
                    </div>
                    <div class="phase-node" data-phase="phase3">
                        <div class="phase-icon-wrapper"><svg xmlns="http://www.w3.org/2000/svg" class="infographic-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 6v12" /><path d="M6 6v12" /><path d="M12 18h-4a2 2 0 0 1 -2 -2v-8a2 2 0 0 1 2 -2h4" /><path d="M12 6h4a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-4" /><path d="M7 12l-4 4" /><path d="M7 12l-4 -4" /><path d="M17 12l4 4" /><path d="M17 12l4 -4" /></svg></div>
                        <h4>
                            <span data-lang="he" class="visible-lang">III. פוסט והעשרה</span>
                            <span data-lang="en">III. Post-Production</span>
                        </h4>
                    </div>
                    <div class="phase-node" data-phase="phase4">
                        <div class="phase-icon-wrapper"><svg xmlns="http://www.w3.org/2000/svg" class="infographic-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M15.51 15.56a5 5 0 1 0 -7.02 0" /><path d="M18.832 18.88a9 9 0 1 0 -13.664 0" /><path d="M12 4v8" /></svg></div>
                        <h4>
                            <span data-lang="he" class="visible-lang">IV. הפצה וניתוח</span>
                            <span data-lang="en">IV. Delivery & Analysis</span>
                        </h4>
                    </div>
                </div>
                <div class="phase-details-container">
                    <div id="phase1" class="phase-details">
                        <span data-lang="he" class="visible-lang"><h5>שלב I: אסטרטגיה ותכנון (השרטוט)</h5><p>זהו היסוד של כל פרויקט מוצלח. בשלב זה אנו מגדירים את המטרות, מבינים את הקהל, בונים תקציב ומפתחים את הקונספט הקריאייטיבי.</p><ul><li>ייעוץ טכנולוגי ובחירת פלטפורמות</li><li>תכנון ותקצוב הפקה</li><li>תחקיר ועריכת תוכן</li></ul></span>
                        <span data-lang="en"><h5>Phase I: Strategy & Pre-Production (The Blueprint)</h5><p>This is the foundation of every successful project. In this stage, we define goals, understand the audience, build a budget, and develop the creative concept.</p><ul><li>Technology consulting and platform selection</li><li>Production planning and budgeting</li><li>Research and content editing</li></ul></span>
                    </div>
                    <div id="phase2" class="phase-details">
                        <span data-lang="he" class="visible-lang"><h5>שלב II: הפקה ותפעול (הביצוע)</h5><p>בשלב זה, התוכנית הופכת למציאות. אנו מנהלים את כל ההיבטים הטכניים והלוגיסטיים של יום הצילום או השידור החי, ומבטיחים ביצוע חלק, מקצועי ויעיל.</p><ul><li>ניהול שידורים חיים (VMIX, Zoom)</li><li>ניתוב ובימוי מצלמות</li><li>הפעלת טלפרומפטר</li></ul></span>
                        <span data-lang="en"><h5>Phase II: Production & Operation (The Execution)</h5><p>In this phase, the plan becomes reality. We manage all technical and logistical aspects of the shoot day or live broadcast, ensuring a smooth, professional, and efficient execution.</p><ul><li>Live broadcast management (VMIX, Zoom)</li><li>Camera switching and directing</li><li>Teleprompter operation</li></ul></span>
                    </div>
                    <div id="phase3" class="phase-details">
                        <span data-lang="he" class="visible-lang"><h5>שלב III: פוסט-פרודקשן והעשרה (הליטוש)</h5><p>כאן הקסם האמיתי קורה. אנו לוקחים את חומרי הגלם ומשדרגים אותם באמצעות עריכה, עיצוב גרפי, אנימציה, וטכנולוגיות מתקדמות.</p><ul><li>עריכת וידאו</li><li>גרפיקה ואנימציה לשידור</li><li>שילוב פתרונות AI</li></ul></span>
                        <span data-lang="en"><h5>Phase III: Post-Production & Enhancement (The Polish)</h5><p>This is where the real magic happens. We take the raw materials and elevate them through editing, graphic design, animation, and advanced technologies.</p><ul><li>Video editing</li><li>Broadcast graphics and animation</li><li>Integration of AI solutions</li></ul></span>
                    </div>
                    <div id="phase4" class="phase-details">
                         <span data-lang="he" class="visible-lang"><h5>שלב IV: הפצה וניתוח (ההשקה והלמידה)</h5><p>הפקה מעולה צריכה להגיע לקהל הנכון ולהשיג את יעדיה. אנו מסייעים בהפצת התוכן בערוצים המתאימים, ומספקים כלים לניתוח ביצועים.</p><ul><li>ניהול הפצה במדיות דיגיטליות</li><li>בניית דפי נחיתה ונגנים מותאמים</li><li>ניתוח נתונים ומשוב</li></ul></span>
                         <span data-lang="en"><h5>Phase IV: Delivery & Analysis (The Launch & Learn)</h5><p>Excellent production needs to reach the right audience and achieve its goals. We assist in distributing the content on the appropriate channels and provide tools for performance analysis.</p><ul><li>Digital media distribution management</li><li>Building custom landing pages and players</li><li>Data analysis and feedback</li></ul></span>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="pricing" class="content-section" data-title-he="שירותים ותעריפים" data-title-en="Services & Pricing">
            <div class="section-container scroll-animate">
                <h2 class="section-title" id="pricing-title">
                    <span data-lang="he" class="visible-lang">שירותים ותעריפים</span>
                    <span data-lang="en">Services & Pricing</span>
                </h2>
                 <p class="text-center max-w-3xl mx-auto" id="pricing-subtitle">
                    <span data-lang="he" class="visible-lang">באירועים חיים, אין הזדמנות שנייה. התמחור שלנו משקף לא רק מיומנות טכנית, אלא את "הערובה האנושית" – הביטחון המלא שהאירוע הקריטי שלכם יתנהל ללא תקלות, בצורה המקצועית ביותר.</span>
                    <span data-lang="en">In live events, there are no second chances. Our pricing reflects not just technical skill, but the "Human Guarantee" – the complete confidence that your critical event will run flawlessly and professionally.</span>
                </p>

                <div class="pricing-grid" id="pricing-grid">
                    <!-- Pricing cards will be dynamically inserted here -->
                </div>
                <p class="kit-fee-note">
                    <span data-lang="he" class="visible-lang"><b>שימו לב:</b> כל התעריפים מתייחסים לעלות העבודה (Labor). עלות השכרת ציוד (Kit Fee) מחושבת בנפרד בהתאם לדרישות הפרויקט.</span>
                    <span data-lang="en"><b>Please note:</b> All rates refer to the cost of labor. The equipment rental cost (Kit Fee) is calculated separately based on project requirements.</span>
                </p>
            </div>
        </section>

        <section id="portal" class="content-section" data-title-he="פורטל לקוחות" data-title-en="Client Portal">
             <div class="section-container scroll-animate" style="padding: 0; max-width: 95%; height: 80vh; overflow: hidden;">
                 <iframe src="https://eporductions.github.io/video/portal.html" style="width: 100%; height: 100%; border: none; border-radius: 12px;" title="פורטל לקוחות"></iframe>
            </div>
        </section>

        <section id="contact" class="content-section" data-title-he="צרו קשר" data-title-en="Contact">
             <div class="section-container text-center scroll-animate">
                <h2 class="section-title">
                    <span data-lang="he" class="visible-lang">בואו נדבר על ההפקה הבאה שלכם</span>
                    <span data-lang="en">Let's Talk About Your Next Production</span>
                </h2>
                <p>
                    <span data-lang="he" class="visible-lang">מוכנים לשמוע על האתגרים שלכם ולהציע פתרונות שישדרגו לכם את האירוע.</span>
                    <span data-lang="en">Ready to hear about your challenges and offer solutions that will elevate your event.</span>
                </p>
                <div class="mt-6 text-lg">
                    <p><strong>Orian Edleni</strong></p>
                    <p>
                        <strong data-lang="he" class="visible-lang">טלפון: </strong>
                        <strong data-lang="en">Phone: </strong>
                        <a href="tel:054-255-9027">054-255-9027</a>
                    </p>
                    <p>
                        <strong data-lang="he" class="visible-lang">אימייל: </strong>
                        <strong data-lang="en">Email: </strong>
                        <a href="mailto:EdelenviProductions@gmail.com">EdelenviProductions@gmail.com</a>
                    </p>
                </div>
            </div>
        </section>
    </main>

    <div id="main-modal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modal-title"></h3>
                <button id="modal-close" class="modal-close-btn">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p>&copy; 2025 PsychoFlash Productions. All rights reserved.</p>
             <p>
                <span data-lang="he" class="visible-lang">נבנה ועוצב על ידי אוריין אדלני בסיוע Gemini</span>
                <span data-lang="en">Built & Designed by Orian Edleni with assistance from Gemini</span>
            </p>
        </div>
    </footer>

    <script type="module">
        // Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase configuration and App ID (provided by the environment)
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        document.addEventListener('DOMContentLoaded', () => {
        const app = {
            state: {
                lang: 'he',
                activePhaseNode: null,
                currentSectionId: 'home',
                activePersona: 'general', 
                mouse: { x: null, y: null, radius: 150 },
                db: null,
                auth: null,
                userId: null,
                isAuthReady: false,
            },

            // New data structure for persona-specific content
            personaData: {
                general: {
                    processSubtitle_he: "אנו מאמינים שהפקה מוצלחת היא מסע מובנה. כל פרויקט, גדול כקטן, עובר דרך ארבעה שלבים מרכזיים המבטיחים איכות, יעילות ועמידה ביעדים.",
                    processSubtitle_en: "We believe a successful production is a structured journey. Every project, large or small, goes through four key phases that ensure quality, efficiency, and goal achievement.",
                    pricingTitle_he: "שירותים ותעריפים",
                    pricingTitle_en: "Services & Pricing",
                    pricingSubtitle_he: `באירועים חיים, אין הזדמנות שנייה. התמחור שלנו משקף לא רק מיומנות טכנית, אלא את "הערובה האנושית" – הביטחון המלא שהאירוע הקריטי שלכם יתנהל ללא תקלות.`,
                    pricingSubtitle_en: `In live events, there are no second chances. Our pricing reflects not just technical skill, but the "Human Guarantee" – the complete confidence that your critical event will run flawlessly.`,
                    packages: [
                        { icon: 'M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 12', title_he: 'מפעיל טכני מומחה', title_en: 'Expert Technical Operator', subtitle_he: 'הביצוע המושלם למשימה', subtitle_en: 'Flawless Task Execution', price_he: 'החל מ-2,500 ₪', price_en: 'From $700', term_he: ' / תעריף יומי', term_en: ' / Day Rate', features_he: ['<b>הפתרון האידיאלי</b> להפקות שכבר יש להן מנהל וצריכות מומחה למשימה ספציפית.', 'ביצוע טכני מדויק ואמין, המבטיח שהרכיב שלכם בהפקה יפעל ללא דופי.'], features_en: ['<b>Ideal solution</b> for productions that need an expert for a specific task.', 'Precise and reliable technical execution, ensuring your component runs perfectly.'], featured: false },
                        { icon: 'M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.87a3 3 0 01-.879-2.122v-1.007M15 15.75a3 3 0 00-3-3H9a3 3 0 00-3 3h12z', title_he: 'מפיק / במאי טכני', title_en: 'Producer / Technical Director', subtitle_he: 'ניהול מלא של השידור החי', subtitle_en: 'Full Live Broadcast Management', price_he: 'החל מ-4,500 ₪', price_en: 'From $1,200', term_he: ' / תעריף יומי', term_en: ' / Day Rate', features_he: ['<b>אחריות מלאה על הצד הטכני של השידור,</b> מייעוץ ותכנון ועד לביצוע מושלם.', 'פתרון בעיות בזמן אמת, ניהול אורחים וקבלת החלטות קריאייטיביות לשיפור השידור.'], features_en: ['<b>Full responsibility for the technical side of the broadcast,</b> from consulting to flawless execution.', 'Real-time problem solving, remote guest management, and creative decision-making.'], featured: true },
                        { icon: 'M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z', title_he: 'מנהל טכני / יועץ', title_en: 'Event TD / Consultant', subtitle_he: 'שותפות אסטרטגית להפקות מורכבות', subtitle_en: 'Strategic Partner for Complex Events', price_he: 'תמחור מבוסס פרויקט', price_en: 'Project-Based Pricing', term_he: '', term_en: '', features_he: ['<b>שותפות מלאה להפקות הדגל שלכם.</b> ניהול כלל ההיבטים הטכניים של כנסים ואירועים היברידיים.', 'תכנון ארכיטקטורת שידור, ניהול צוותים, תכנון גיבויים והבטחת איכות כוללת.'], features_en: ['<b>A full partnership for your flagship productions.</b> Managing all technical aspects of complex events.', 'Broadcast architecture design, team management, redundancy planning, and quality assurance.'], featured: false }
                    ]
                },
                production: {
                    processSubtitle_he: "כשאני מצטרף להפקה שלכם, התהליך מותאם לספק לכם שקט נפשי וביצוע מדויק, מהתכנון המקדים ועד לסיום המוצלח של האירוע.",
                    processSubtitle_en: "When I join your production, the process is tailored to provide peace of mind and precise execution, from pre-planning to the event's successful conclusion.",
                    pricingTitle_he: "שירותים לחברות הפקה ואירועים",
                    pricingTitle_en: "Services for Production & Event Companies",
                    pricingSubtitle_he: "זקוקים לידיים מקצועיות? אני כאן כדי להשתלב בצוות שלכם ולהבטיח ביצוע חלק ומושלם.",
                    pricingSubtitle_en: "Need a professional hand? I'm here to integrate into your team and ensure a smooth, perfect execution.",
                    packages: [
                        { icon: 'M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 12', title_he: 'מפעיל vMix / פרומפטר', title_en: 'vMix / Prompter Operator', subtitle_he: 'מומחה למשימה ספציפית', subtitle_en: 'Specialist for a specific task', price_he: 'החל מ-2,500 ₪', price_en: 'From $700', term_he: ' / תעריף יומי', term_en: ' / Day Rate', features_he: ['הפעלה שוטפת של מערכות שידור מורכבות.', 'ניסיון במגוון רחב של הפקות שידור ואירועים.', 'עבודה חלקה תחת מנהל טכני/במאי.'], features_en: ['Flawless operation of complex broadcast systems.', 'Experience in a wide range of productions.', 'Seamless work under a TD/Director.'], featured: false },
                        { icon: 'M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.87a3 3 0 01-.879-2.122v-1.007M15 15.75a3 3 0 00-3-3H9a3 3 0 00-3 3h12z', title_he: 'מפיק שידור היברידי', title_en: 'Hybrid Broadcast Producer', subtitle_he: 'ניהול החלק הווירטואלי באירוע', subtitle_en: 'Managing the virtual part of the event', price_he: 'החל מ-3,500 ₪', price_en: 'From $950', term_he: ' / תעריף יומי', term_en: ' / Day Rate', features_he: ['ניהול מלא של פלטפורמת הסטרימינג.', 'תדרוך וניהול דוברים מרוחקים.', 'הבטחת חוויה חלקה למשתתפים הדיגיטליים.'], features_en: ['Full management of the streaming platform.', 'Briefing and managing remote speakers.', 'Ensuring a smooth experience for digital attendees.'], featured: true },
                        { icon: 'M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z', title_he: 'מנהל טכני לאירוע', title_en: 'Event Technical Director', subtitle_he: 'ראייה רחבה להפקות מורכבות', subtitle_en: 'Vision for complex productions', price_he: 'תמחור מבוסס פרויקט', price_en: 'Project-Based Pricing', term_he: '', term_en: '', features_he: ['תכנון ושרטוט מערך השידור (ארכיטקטורה).', 'ניהול צוות המפעילים הטכניים.', 'נקודת קשר טכנית מרכזית מול הלקוח שלכם.'], features_en: ['Broadcast system design and schematics.', 'Management of the technical operator team.', 'Central technical point of contact for your client.'], featured: false }
                    ]
                },
                media: {
                    processSubtitle_he: "התהליך שלנו מותאם לסביבת השידור המקצועית: אפיון טכני מעמיק, אינטגרציה זהירה עם מערכות קיימות, והטמעה חלקה ללא הפרעה לפעילות השוטפת.",
                    processSubtitle_en: "Our process is adapted for professional broadcast environments: in-depth technical analysis, careful integration with existing systems, and smooth implementation without disrupting operations.",
                    pricingTitle_he: "שירותים לגופי תקשורת ואולפנים",
                    pricingTitle_en: "Services for Media Outlets & Studios",
                    pricingSubtitle_he: "פתרונות מותאמים אישית לאתגרי השידור של היום והמחר.",
                    pricingSubtitle_en: "Custom solutions for the broadcast challenges of today and tomorrow.",
                    packages: [
                        { icon: 'M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 12', title_he: 'הקמת מערך שידור שטח', title_en: 'Field Broadcast Setup', subtitle_he: 'פרויקטים מיוחדים מחוץ לאולפן', subtitle_en: 'Special projects outside the studio', price_he: 'החל מ-4,000 ₪', price_en: 'From $1100', term_he: ' / ליום עבודה', term_en: ' / per workday', features_he: ['תכנון והקמה של עמדות שידור ניידות.', 'אינטגרציה עם מערכות שידור מרכזיות.', 'פתרונות קישוריות ותקשורת מהשטח.'], features_en: ['Planning and setup of mobile broadcast positions.', 'Integration with central broadcast systems.', 'Connectivity and communication solutions from the field.'], featured: false},
                        { icon: 'M6.75 7.5h10.5v1.5H6.75V7.5zM6 11.25h12v1.5H6v-1.5zM6 15h12v1.5H6V15z', title_he: 'אינטגרציה ואוטומציה', title_en: 'Integration & Automation', subtitle_he: 'גישור בין מערכות וטכנולוגיות', subtitle_en: 'Bridging systems and technologies', price_he: 'תמחור מבוסס פרויקט', price_en: 'Project-Based Pricing', term_he: '', term_en: '', features_he: ['שילוב טכנולוגיות IP ו-AI ב-workflow קיים.', 'כתיבת סקריפטים ופיתוח כלי אוטומציה.', 'ייעוץ למעבר לטכנולוגיות שידור מתקדמות.'], features_en: ['Integrating IP and AI tech into existing workflows.', 'Scripting and developing automation tools.', 'Consulting on transitioning to advanced broadcast tech.'], featured: true},
                        { icon: 'M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z', title_he: 'תמיכה טכנית-שידורית', title_en: 'Broadcast Technical Support', subtitle_he: 'כוח אדם מיומן לפי דרישה', subtitle_en: 'Skilled personnel on demand', price_he: 'תמחור לפי בנק שעות', price_en: 'Hourly Bank Pricing', term_he: '', term_en: '', features_he: ['זמינות לפתרון תקלות וליווי פרויקטים.', 'השלמת צוותים קיימים בנקודות עומס.', 'מומחיות במגוון רחב של מערכות.'], features_en: ['Availability for troubleshooting and project support.', 'Augmenting existing teams during peak loads.', 'Expertise in a wide range of systems.'], featured: false}
                    ]
                },
                brands: {
                    processSubtitle_he: "התהליך שלנו מתחיל בהבנת המטרות העסקיות שלכם. משם, אנו מתכננים חוויה שלמה שמשלבת תוכן, טכנולוגיה ועיצוב כדי להעביר את המסר שלכם בצורה האפקטיבית ביותר.",
                    processSubtitle_en: "Our process starts with understanding your business goals. From there, we design a complete experience that combines content, technology, and design to convey your message most effectively.",
                    pricingTitle_he: "שירותים למותגים ועסקים",
                    pricingTitle_en: "Services for Brands & Businesses",
                    pricingSubtitle_he: "פתרונות מקצה לקצה שיהפכו את האירוע שלכם לחוויה מקצועית ומרשימה.",
                    pricingSubtitle_en: "End-to-end solutions to turn your event into a professional and impressive experience.",
                     packages: [
                        { icon: 'M15.75 15.75l-2.489-2.489m0 0a3.375 3.375 0 10-4.773-4.773 3.375 3.375 0 004.774 4.774zM21 12a9 9 0 11-18 0 9 9 0 0118 0z', title_he: 'וובינר עסקי', title_en: 'Business Webinar', subtitle_he: 'להעברת מסרים חדים וברורים', subtitle_en: 'For sharp and clear messaging', price_he: 'החל מ-3,500 ₪', price_en: 'From $950', term_he: ' / לאירוע', term_en: ' / per event', features_he: ['תכנון וייעוץ טכני לפני השידור.', 'ניהול מלא של פלטפורמת הוובינר (Zoom/Teams).', 'שילוב גרפיקה ומיתוג של החברה.'], features_en: ['Technical planning and consulting.', 'Full management of the webinar platform.', 'Integration of company branding and graphics.'], featured: false },
                        { icon: 'M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.87a3 3 0 01-.879-2.122v-1.007M15 15.75a3 3 0 00-3-3H9a3 3 0 00-3 3h12z', title_he: 'כנס / השקה היברידית', title_en: 'Hybrid Conference / Launch', subtitle_he: 'חיבור בין קהל פיזי לדיגיטלי', subtitle_en: 'Connecting physical & digital audiences', price_he: 'החל מ-8,000 ₪', price_en: 'From $2,200', term_he: ' / ליום שידור', term_en: ' / per broadcast day', features_he: ['בניית ארכיטקטורת שידור מלאה.', 'ניהול צוות טכני וסנכרון ספקים.', 'פתרונות אינטראקציה מתקדמים לקהל.'], features_en: ['Full broadcast architecture design.', 'Technical crew management and vendor sync.', 'Advanced audience interaction solutions.'], featured: true },
                        { icon: 'M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z', title_he: 'וידאו פנימי ותקשורת ארגונית', title_en: 'Internal & Corporate Comms', subtitle_he: 'הפקת תכנים לתוך הארגון', subtitle_en: 'Producing content for the organization', price_he: 'תמחור מבוסס ריטיינר', price_en: 'Retainer-Based Pricing', term_he: '', term_en: '', features_he: ['הקלטת הדרכות והודעות מנהלים.', 'שידור ישיבות ואירועי חברה.', 'פתרונות מאובטחים להפצה פנימית.'], features_en: ['Recording tutorials and executive messages.', 'Broadcasting meetings and company events.', 'Secure internal distribution solutions.'], featured: false }
                    ]
                },
                public: {
                    processSubtitle_he: "התהליך שלנו שם דגש על אבטחת מידע, נגישות לבעלי מוגבלויות, ותאימות לתקנים הנדרשים. אנו עובדים בשיתוף פעולה מלא עם מחלקות ה-IT והאבטחה שלכם.",
                    processSubtitle_en: "Our process emphasizes information security, accessibility for people with disabilities, and compliance with required standards. We work in full cooperation with your IT and security departments.",
                    pricingTitle_he: "שירותים לגופים ציבוריים ואקדמיים",
                    pricingTitle_en: "Services for Public & Academic Bodies",
                    pricingSubtitle_he: "פתרונות שידור מאובטחים, נגישים ומבוססי תקנים.",
                    pricingSubtitle_en: "Secure, accessible, and standards-based broadcast solutions.",
                     packages: [
                        { icon: 'M15.75 15.75l-2.489-2.489m0 0a3.375 3.375 0 10-4.773-4.773 3.375 3.375 0 004.774 4.774zM21 12a9 9 0 11-18 0 9 9 0 0118 0z', title_he: 'תיעוד והקלטת כנס/הרצאה', title_en: 'Conference/Lecture Recording', subtitle_he: 'הפקה איכותית לארכיון ולמידה', subtitle_en: 'High-quality production for archive & learning', price_he: 'החל מ-3,200 ₪', price_en: 'From $850', term_he: ' / ליום צילום', term_en: ' / per shoot day', features_he: ['צילום מקצועי (עד 2 מצלמות).', 'הקלטת סאונד נקייה וברורה.', 'עריכה והוספת כתוביות נגישות (על פי דרישה).'], features_en: ['Professional filming (up to 2 cameras).', 'Clean and clear sound recording.', 'Editing and adding accessible subtitles (on demand).'], featured: false },
                        { icon: 'M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.87a3 3 0 01-.879-2.122v-1.007M15 15.75a3 3 0 00-3-3H9a3 3 0 00-3 3h12z', title_he: 'שידור חי מאובטח', title_en: 'Secure Live Broadcast', subtitle_he: 'כולל תרגום סימולטני', subtitle_en: 'Including simultaneous translation', price_he: 'החל מ-5,000 ₪', price_en: 'From $1350', term_he: ' / לשידור', term_en: ' / per broadcast', features_he: ['שידור בפלטפורמות מאובטחות.', 'שילוב ערוצי תרגום סימולטני.', 'תמיכה טכנית מלאה למשתתפים ולדוברים.'], features_en: ['Broadcasting on secure platforms.', 'Integration of simultaneous translation channels.', 'Full technical support for attendees and speakers.'], featured: true },
                        { icon: 'M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z', title_he: 'כנס אקדמי וירטואלי', title_en: 'Virtual Academic Conference', subtitle_he: 'ניהול אירוע מרובה חדרים', subtitle_en: 'Managing multi-room events', price_he: 'תמחור מבוסס פרויקט', price_en: 'Project-Based Pricing', term_he: '', term_en: '', features_he: ['ניהול חדרים מקבילים (Breakout Rooms).', 'תמיכה טכנית לדוברים בינלאומיים.', 'הקלטה וקיטלוג של כל המושבים.'], features_en: ['Management of breakout rooms.', 'Technical support for international speakers.', 'Recording and cataloging of all sessions.'], featured: false }
                    ]
                },
                creators: {
                    processSubtitle_he: "התהליך איתי הוא שיתוף פעולה. אני מקשיב לחזון היצירתי שלכם ומתרגם אותו לפתרון טכני ישים, יעיל ובתקציב שמתאים להפקה עצמאית.",
                    processSubtitle_en: "The process with me is a collaboration. I listen to your creative vision and translate it into a feasible, efficient, and budget-friendly technical solution for independent productions.",
                    pricingTitle_he: "שירותים ליוצרים וסטארטאפים",
                    pricingTitle_en: "Services for Creators & Startups",
                    pricingSubtitle_he: "כלים ושירותים שיקפיצו את איכות התוכן שלכם ויאפשרו לכם להתמקד ביצירה.",
                    pricingSubtitle_en: "Tools and services to level up your content quality, letting you focus on creating.",
                     packages: [
                        { icon: 'M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 12', title_he: 'ייעוץ והקמת אולפן', title_en: 'Studio Setup & Consulting', subtitle_he: 'בניית סטאפ מותאם אישית', subtitle_en: 'Building a custom setup', price_he: 'החל מ-1,500 ₪', price_en: 'From $400', term_he: ' / לייעוץ', term_en: ' / for consulting', features_he: ['אפיון צרכים ובחירת ציוד (יד ראשונה/שנייה).', 'התקנה וכיול של תוכנות שידור (OBS/vMix).', 'בניית תבניות גרפיות לשידור.'], features_en: ['Needs assessment and equipment selection (new/used).', 'Installation and calibration of broadcast software.', 'Creation of graphic templates for broadcast.'], featured: false },
                        { icon: 'M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.87a3 3 0 01-.879-2.122v-1.007M15 15.75a3 3 0 00-3-3H9a3 3 0 00-3 3h12z', title_he: 'תמיכה טכנית להפקה', title_en: 'Production Tech Support', subtitle_he: 'שקט נפשי בזמן הצילומים/לייב', subtitle_en: 'Peace of mind on set / during live', price_he: 'החל מ-800 ₪', price_en: 'From $220', term_he: ' / לשעה (מינימום 3)', term_en: ' / per hour (3hr min)', features_he: ['ליווי טכני ביום צילום/שידור.', 'פתרון בעיות סנכרון, סאונד ווידאו.', 'הפעלת מערכות הקלטה/שידור.'], features_en: ['On-set technical support.', 'Troubleshooting sync, sound, and video issues.', 'Operating recording/broadcast systems.'], featured: true },
                        { icon: 'M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0012 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75z', title_he: 'חבילת פוסט-פרודקשן', title_en: 'Post-Production Package', subtitle_he: 'מעריכת וידאו ועד פודקאסט', subtitle_en: 'From video editing to podcasts', price_he: 'תמחור מבוסס פרויקט', price_en: 'Project-Based Pricing', term_he: '', term_en: '', features_he: ['עריכת VOD ורילס לרשתות חברתיות.', 'עריכת סאונד ומיקס לפודקאסטים.', 'יצירת פתיח ואריזה גרפית לערוץ.'], features_en: ['VOD and Reels editing for social media.', 'Sound editing and mixing for podcasts.', 'Creating channel intros and graphic packages.'], featured: false }
                    ]
                }
            },
            
            // Content for modals that are not from Firestore
            localModalContent: {
                tackles: {
                    title_he: "מה זה 'תכל'ס'?",
                    title_en: "What is 'Tackles' (The Get-it-Done)?",
                    content_he: `<p>המונח 'תכל'ס' מייצג את הליבה של הביצוע האמין שלנו. זהו הניסיון המעשי שצברנו בשטח, היכולת לנהל פרויקטים מורכבים תחת לחץ, וההבטחה שכל פרט טכני, מהקטן ועד הגדול, יבוצע בצורה מושלמת, בזמן, ובתקציב.</p><p>זה השקט הנפשי שלקוחותינו מקבלים כשהם יודעים שההפקה שלהם נמצאת בידיים שאפשר לסמוך עליהן.</p>`,
                    content_en: `<p>The term 'Tackles' (a Hebrew slang for 'getting to the point' or 'the bottom line') represents the core of our reliable execution. It's the practical, hands-on experience we've gained in the field, the ability to manage complex projects under pressure, and the promise that every technical detail, from the smallest to the largest, will be handled perfectly, on time, and within budget.</p><p>It's the peace of mind our clients get knowing their production is in hands they can trust.</p>`
                },
                toolbox: {
                    title_he: "מה זה 'ארגז הכלים'?",
                    title_en: "What is the 'Toolbox'?",
                    content_he: `<p>'ארגז הכלים' הוא המטאפורה שלנו לחדשנות וליצירתיות הטכנולוגית. הוא לא מכיל רק ציוד, אלא מאגר רחב של פתרונות: מפיתוח תוכנה מותאמת אישית ואוטומציות, דרך עיצוב גרפי מתקדם ובניית תבניות שידור, ועד לשילוב יכולות בינה מלאכותית (AI) לייעול תהליכים ויצירת חוויות ייחודיות.</p><p>זהו הערך המוסף שלנו, המאפשר לנו לקחת כל חזון ולהפוך אותו למציאות מרשימה וחדשנית.</p>`,
                    content_en: `<p>The 'Toolbox' is our metaphor for technological innovation and creativity. It doesn't just contain equipment, but a wide array of solutions: from custom software development and automation, through advanced graphic design and broadcast template creation, to integrating Artificial Intelligence (AI) capabilities to streamline processes and create unique experiences.</p><p>This is our added value, allowing us to take any vision and turn it into an impressive and innovative reality.</p>`
                }
            },
            
            async init() {
                this.cacheDOM();
                this.bindStaticEvents();
                this.updateContentForPersona(this.state.activePersona, true); // Initial render
                try {
                    await this.initFirebase();
                } catch(error) {
                    console.error("Firebase initialization failed:", error);
                }
            },
            
            async initFirebase() {
                const firebaseApp = initializeApp(firebaseConfig);
                this.state.db = getFirestore(firebaseApp);
                this.state.auth = getAuth(firebaseApp);
                setLogLevel('debug');

                return new Promise((resolve, reject) => {
                    onAuthStateChanged(this.state.auth, async (user) => {
                        if (user) {
                            this.state.userId = user.uid;
                            this.state.isAuthReady = true;
                            console.log("Firebase Auth ready. User ID:", this.state.userId);
                            this.finishInitialization();
                            resolve();
                        } else {
                             try {
                                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                                    await signInWithCustomToken(this.state.auth, __initial_auth_token);
                                } else {
                                    await signInAnonymously(this.state.auth);
                                }
                            } catch (error) {
                                console.error("Firebase sign-in error", error);
                                reject(error);
                            }
                        }
                    });
                });
            },
            
            finishInitialization() {
                this.setupOrbAnimation();
                this.setupHeaderTitleObserver();
                this.setupInfographicAnimation();
                this.setupScrollAnimations();
                this.setupModal();
            },

            cacheDOM() {
                this.dom = {
                    html: document.documentElement,
                    header: document.querySelector('header'),
                    headerTitleContainer: document.getElementById('header-title-container'),
                    navLinks: document.querySelectorAll('.nav-link'),
                    hamburgerBtn: document.getElementById('hamburger-btn'),
                    offcanvasMenu: document.getElementById('offcanvas-menu'),
                    closeMenuBtn: document.getElementById('close-menu-btn'),
                    langBtns: {
                        he: document.getElementById('btn-he'),
                        en: document.getElementById('btn-en'),
                    },
                    langBtnsMobile: {
                        he: document.getElementById('btn-he-mobile'),
                        en: document.getElementById('btn-en-mobile'),
                    },
                    canvasBack: document.getElementById('orb-canvas-back'),
                    sections: document.querySelectorAll('.content-section'),
                    modal: {
                        overlay: document.getElementById('main-modal'),
                        title: document.getElementById('modal-title'),
                        body: document.getElementById('modal-body'),
                        closeBtn: document.getElementById('modal-close'),
                    },
                    // Dynamic Content Elements
                    personaSelector: document.getElementById('persona-selector'),
                    processTitle: document.getElementById('process-title'),
                    processSubtitle: document.getElementById('process-subtitle'),
                    pricingGrid: document.getElementById('pricing-grid'),
                    pricingTitle: document.getElementById('pricing-title'),
                    pricingSubtitle: document.getElementById('pricing-subtitle'),
                    infoBoxClickables: document.querySelectorAll('.info-box-clickable'),
                    processInfographic: document.querySelector('.infographic-process-wrapper'),
                };
            },

            bindStaticEvents() {
                window.addEventListener('mousemove', this.handleMouseMove.bind(this));
                this.dom.langBtns.he.addEventListener('click', () => this.setLanguage('he'));
                this.dom.langBtns.en.addEventListener('click', () => this.setLanguage('en'));
                this.dom.langBtnsMobile.he.addEventListener('click', () => this.setLanguage('he'));
                this.dom.langBtnsMobile.en.addEventListener('click', () => this.setLanguage('en'));
                this.dom.navLinks.forEach(link => link.addEventListener('click', this.handleNavClick.bind(this)));
                this.dom.hamburgerBtn.addEventListener('click', () => this.dom.offcanvasMenu.classList.add('active'));
                this.dom.closeMenuBtn.addEventListener('click', () => this.dom.offcanvasMenu.classList.remove('active'));
                
                document.body.addEventListener('click', (e) => {
                    const phaseNode = e.target.closest('.phase-node');
                    if (phaseNode) this.togglePhaseDetails(phaseNode);

                    const personaNode = e.target.closest('.persona-card');
                    if(personaNode) this.updateContentForPersona(personaNode.dataset.persona);
                });
                
                window.addEventListener('resize', this.resizeCanvas.bind(this));
            },

            updateContentForPersona(personaId, isInitial = false) {
                if (!personaId || !this.personaData[personaId]) return;

                this.state.activePersona = personaId;
                const persona = this.personaData[personaId];
                const lang = this.state.lang;
                
                if (this.dom.processTitle && persona.processTitle_he) {
                    this.dom.processTitle.querySelector(`[data-lang="${lang}"]`).innerHTML = persona[`processTitle_${lang}`];
                }
                this.dom.processSubtitle.querySelector(`[data-lang="${lang}"]`).innerHTML = persona[`processSubtitle_${lang}`];
                this.dom.pricingTitle.querySelector(`[data-lang="${lang}"]`).innerHTML = persona[`pricingTitle_${lang}`];
                this.dom.pricingSubtitle.querySelector(`[data-lang="${lang}"]`).innerHTML = persona[`pricingSubtitle_${lang}`];
                
                this.renderPricingCards(persona.packages);

                this.dom.personaSelector.querySelectorAll('.persona-card').forEach(card => {
                    card.classList.toggle('active', card.dataset.persona === personaId);
                });
            },

            renderPricingCards(packages) {
                this.dom.pricingGrid.innerHTML = ''; // Clear existing cards
                packages.forEach((pkg, index) => {
                    const isFeatured = pkg.featured ? 'featured' : '';
                    const lang = this.state.lang;

                    const featuresList = pkg[`features_${lang}`];
                    const featuresHTML = featuresList.map(feature => `
                        <li>
                            <svg class="w-5 h-5 text-green-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.052-.143z" clip-rule="evenodd" /></svg>
                            <span>${feature}</span>
                        </li>
                    `).join('');

                    const cardHTML = `
                        <div class="pricing-card scroll-animate delay-${index+1} ${isFeatured}">
                            <div class="pricing-card-header">
                                <div class="pricing-card-icon">
                                    <svg class="w-12 h-12 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="${pkg.icon}" /></svg>
                                </div>
                                <h3>
                                    <span data-lang="he">${pkg.title_he}</span>
                                    <span data-lang="en">${pkg.title_en}</span>
                                </h3>
                                <p class="text-slate-500 font-semibold mt-1">
                                    <span data-lang="he">${pkg.subtitle_he}</span>
                                    <span data-lang="en">${pkg.subtitle_en}</span>
                                </p>
                            </div>
                            <div class="price">
                               <span data-lang="he">${pkg.price_he}</span>
                               <span data-lang="en">${pkg.price_en}</span>
                               <span class="term" data-lang="he">${pkg.term_he}</span>
                               <span class="term" data-lang="en">${pkg.term_en}</span>
                            </div>
                            <ul>${featuresHTML}</ul>
                            <a href="#contact" class="cta-btn mt-auto">
                                <span data-lang="he" class="visible-lang">לפרטים נוספים</span>
                                <span data-lang="en">Learn More</span>
                            </a>
                        </div>`;
                    this.dom.pricingGrid.insertAdjacentHTML('beforeend', cardHTML);
                });
                this.setLanguage(this.state.lang, true); 
                this.setupScrollAnimations();
            },

            setupModal() {
                 this.dom.infoBoxClickables.forEach(card => {
                    card.addEventListener('click', () => {
                        const modalId = card.dataset.modalTrigger;
                        this.openModal(modalId);
                    });
                });

                this.dom.modal.closeBtn.addEventListener('click', () => this.closeModal());
                this.dom.modal.overlay.addEventListener('click', (e) => {
                    if (e.target === this.dom.modal.overlay) {
                        this.closeModal();
                    }
                });
            },
            
            async openModal(modalId) {
                let modalData = this.localModalContent[modalId];
                                
                if (!modalData) {
                     this.dom.modal.title.innerHTML = this.state.lang === 'he' ? "שגיאה" : "Error";
                     this.dom.modal.body.innerHTML = this.state.lang === 'he' ? "<p>לא ניתן היה לטעון את התוכן.</p>" : "<p>Could not load the content.</p>";
                } else {
                    const title = this.state.lang === 'he' ? modalData.title_he : modalData.title_en;
                    const content = this.state.lang === 'he' ? modalData.content_he : modalData.content_en;
                    this.dom.modal.title.innerHTML = title;
                    this.dom.modal.body.innerHTML = content;
                }

                this.dom.modal.overlay.style.display = 'flex';
                setTimeout(() => {
                    this.dom.modal.overlay.classList.add('active');
                }, 10);
                document.body.style.overflow = 'hidden';
            },

            closeModal() {
                this.dom.modal.overlay.classList.remove('active');
                setTimeout(() => {
                    this.dom.modal.overlay.style.display = 'none';
                }, 300);
                document.body.style.overflow = '';
            },

            handleNavClick(e) {
                e.preventDefault();
                const targetId = e.currentTarget.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                   const offset = this.dom.header.offsetHeight;
                   const bodyRect = document.body.getBoundingClientRect().top;
                   const elementRect = targetElement.getBoundingClientRect().top;
                   const elementPosition = elementRect - bodyRect;
                   const offsetPosition = elementPosition - offset;

                   window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
                }
                this.dom.offcanvasMenu.classList.remove('active');
            },

            handleMouseMove(e) {
                this.state.mouse.x = e.clientX;
                this.state.mouse.y = e.clientY;
            },

            setLanguage(lang, isInitial = false) {
                this.state.lang = lang;
                this.dom.html.lang = lang;
                this.dom.html.dir = lang === 'he' ? 'rtl' : 'ltr';

                this.dom.langBtns.he.classList.toggle('active-lang', lang === 'he');
                this.dom.langBtns.en.classList.toggle('active-lang', lang !== 'he');
                this.dom.langBtnsMobile.he.classList.toggle('active-lang', lang === 'he');
                this.dom.langBtnsMobile.en.classList.toggle('active-lang', lang !== 'he');
                
                document.querySelectorAll('[data-lang]').forEach(el => {
                    el.classList.toggle('visible-lang', el.dataset.lang === lang);
                });

                if (!isInitial) {
                    this.updateContentForPersona(this.state.activePersona);
                    this.updateHeaderTitle(this.state.currentSectionId);
                }
            },
            
            setupHeaderTitleObserver() {
                const visibleSectionRatios = new Map();

                const observerOptions = {
                    root: null,
                    rootMargin: `-${this.dom.header.offsetHeight}px 0px 0px 0px`,
                    threshold: Array(101).fill(0).map((_, i) => i / 100),
                };

                const findMostVisibleSection = () => {
                    let maxRatio = -1;
                    let mostVisibleSectionId = this.dom.sections[0].id;
                    visibleSectionRatios.forEach((ratio, id) => {
                        if (ratio > maxRatio) {
                            maxRatio = ratio;
                            mostVisibleSectionId = id;
                        }
                    });
                    return mostVisibleSectionId;
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                         visibleSectionRatios.set(entry.target.id, entry.intersectionRatio);
                    });

                    const activeSectionId = findMostVisibleSection();

                    if (activeSectionId && this.state.currentSectionId !== activeSectionId) {
                        this.state.currentSectionId = activeSectionId;
                        this.updateHeaderTitle(activeSectionId);
                        
                        this.dom.navLinks.forEach(link => {
                             link.classList.toggle('active', link.getAttribute('href') === `#${activeSectionId}`);
                        });
                    }
                }, observerOptions);

                this.dom.sections.forEach(section => {
                    observer.observe(section);
                });
            },

            updateHeaderTitle(sectionId) {
                const section = document.getElementById(sectionId);
                if (!section) return;

                const titleHe = section.dataset.titleHe;
                const titleEn = section.dataset.titleEn;

                const titleContainerHe = this.dom.headerTitleContainer.querySelector('[data-lang="he"]');
                const titleContainerEn = this.dom.headerTitleContainer.querySelector('[data-lang="en"]');
                
                if (titleContainerHe) titleContainerHe.textContent = titleHe || 'PsychoFlash';
                if (titleContainerEn) titleContainerEn.textContent = titleEn || 'PsychoFlash';
            },

            setupInfographicAnimation() {
                if (!this.dom.processInfographic) return;
                const timeline = this.dom.processInfographic.querySelector('.timeline-container');
                if (!timeline) return;

                const progressLine = timeline.querySelector('.timeline-line-progress');
                const nodes = timeline.querySelectorAll('.phase-node');
                
                const observer = new IntersectionObserver((entries) => {
                    if (entries[0].isIntersecting) {
                        progressLine.style.width = '100%';
                        nodes.forEach((node, index) => {
                            setTimeout(() => node.classList.add('visible'), index * 200);
                        });
                        observer.disconnect();
                    }
                }, { threshold: 0.5 });

                observer.observe(timeline);
            },
            
            setupScrollAnimations() {
                const animatedElements = document.querySelectorAll('.scroll-animate');
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('in-view');
                        }
                    });
                }, { threshold: 0.1 });

                animatedElements.forEach(el => {
                    observer.observe(el);
                });
            },

            togglePhaseDetails(phaseNode) {
                const phaseId = phaseNode.dataset.phase;
                const detailPanel = document.getElementById(phaseId);
                if (!detailPanel) return;

                const isActive = phaseNode.classList.contains('active');

                if (this.state.activePhaseNode && this.state.activePhaseNode !== phaseNode) {
                    this.state.activePhaseNode.classList.remove('active');
                    const oldDetailPanel = document.getElementById(this.state.activePhaseNode.dataset.phase);
                    $(oldDetailPanel).slideUp();
                }

                if (isActive) {
                    phaseNode.classList.remove('active');
                    $(detailPanel).slideUp();
                    this.state.activePhaseNode = null;
                } else {
                    phaseNode.classList.add('active');
                    $(detailPanel).slideDown();
                    this.state.activePhaseNode = phaseNode;
                }
            },
            
            // --- ORB ANIMATION ---
            orbs: [],
            ctxBack: null,
            setupOrbAnimation() {
                if (!this.dom.canvasBack) return;
                this.ctxBack = this.dom.canvasBack.getContext('2d');
                this.resizeCanvas();
                this.animateOrbs();
            },
            resizeCanvas() {
                if (!this.dom.canvasBack) return;
                this.dom.canvasBack.width = window.innerWidth;
                this.dom.canvasBack.height = window.innerHeight;
                this.initOrbs();
            },
            GlowingOrb: class {
                 constructor(canvas) {
                    this.canvas = canvas;
                    this.x = Math.random() * this.canvas.width;
                    this.y = Math.random() * this.canvas.height;
                    this.radius = Math.random() * 5 + 2;
                    this.baseSpeedX = (Math.random() - 0.5) * 0.2;
                    this.baseSpeedY = (Math.random() - 0.5) * 0.2;
                    this.speedX = this.baseSpeedX;
                    this.speedY = this.baseSpeedY;
                    this.color = `rgba(122, 81, 149, ${Math.random()*0.4 + 0.1})`;
                 }
                 update(mouse) {
                    if (mouse.x !== null) {
                        const dx = this.x - mouse.x;
                        const dy = this.y - mouse.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < mouse.radius) {
                            const forceDirectionX = dx / distance;
                            const forceDirectionY = dy / distance;
                            const force = (mouse.radius - distance) / mouse.radius;
                            const directionX = forceDirectionX * force * 0.6;
                            const directionY = forceDirectionY * force * 0.6;
                            this.speedX += directionX;
                            this.speedY += directionY;
                        }
                    }
                    this.speedX = (this.speedX * 0.96) + (this.baseSpeedX * 0.04);
                    this.speedY = (this.speedY * 0.96) + (this.baseSpeedY * 0.04);
                    
                    this.x += this.speedX;
                    this.y += this.speedY;
                    
                    if (this.x > this.canvas.width + this.radius) this.x = -this.radius;
                    if (this.x < -this.radius) this.x = this.canvas.width + this.radius;
                    if (this.y > this.canvas.height + this.radius) this.y = -this.radius;
                    if (this.y < -this.radius) this.y = this.canvas.height + this.radius;
                 }
                 draw(ctx) {
                     ctx.save();
                     ctx.beginPath();
                     ctx.fillStyle = this.color;
                     ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
                     ctx.fill();
                     ctx.restore();
                 }
             },
            initOrbs() {
                if (!this.dom.canvasBack) return;
                this.orbs = [];
                let numOrbs = window.innerWidth < 768 ? 40 : 80;
                for (let i = 0; i < numOrbs; i++) {
                    this.orbs.push(new this.GlowingOrb(this.dom.canvasBack));
                }
            },
            animateOrbs() {
                if (this.ctxBack) {
                    this.ctxBack.clearRect(0, 0, this.dom.canvasBack.width, this.dom.canvasBack.height);
                    this.orbs.forEach(orb => {
                        orb.update(this.state.mouse);
                        orb.draw(this.ctxBack);
                    });
                }
                requestAnimationFrame(this.animateOrbs.bind(this));
            }
        };

        app.init();
    });
    </script>
</body>
</html>
